var h=Object.defineProperty;var c=(a,s,e)=>s in a?h(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e;var x=(a,s,e)=>(c(a,typeof s!="symbol"?s+"":s,e),e);import{r as i,a as u}from"./index.7473cb17.js";import{n as d,h as p,u as y}from"./relation-graph.26f01d58.js";const{RGNodesAnalytic:f}=p;class m extends d.FixedLayouter{constructor(e,r){super(e,r);x(this,"layoutOptions");this.layoutOptions=e,o("new CustomerLayouter:",this.layoutOptions)}async refresh(){o("CustomerLayouter:refresh:nodes:",this.allNodes.length),await this.placeNodes(this.allNodes,this.rootNode)}async placeNodes(e,r){if(o("CustomerLayouter:placeNodes"),r)o("layout by root:",r);else{console.error("root is null");return}this.rootNode=r,this.allNodes=e,o("allNodes:",e.length),e.forEach(t=>{t.lot.eached=!1,t.lot.notLeafNode=!1,t.lot.childs=[],t.lot.parent=void 0,t.lot.index_of_parent=0,t.lot.strength=0,t.lot.strengthWithChilds_from=0,t.lot.strengthWithChilds=0,t.lot.placed=!1});const n={x:-500,y:-500};for(let t=0;t<this.allNodes.length;t++){const l=this.allNodes[t];l.lot.x=n.x+t%3*300,l.lot.y=n.y+Math.floor(t/3)*300,o("n:",t,l.id,l.lot.x,l.lot.y)}o("allNodes:",this.allNodes.length,this.graphOptions.useAnimationWhenExpanded),this.graphOptions.useAnimationWhenExpanded?(o("Play layout animation....."),await this.animationLayout(),o("create rootNode coordinates:3",r.x,r.y)):(this.allNodes.forEach(t=>{if(t.fixed===!0){t.lot.placed=!0;return}!f.isAllowShowNode(t)||(Number.isNaN(t.lot.x)&&(o("bad lot x:",t.text,t.lot.x),t.lot.x=0),Number.isNaN(t.lot.y)&&(o("bad lot y:",t.text,t.lot.y),t.lot.y=0),t.x=f.getNodeXByLotX(this.graphOptions,t),t.y=f.getNodeYByLotY(this.graphOptions,t),t.lot.placed=!0,o("n:",t.id,t.x,t.y))}),o("create rootNode coordinates:1",r.x,r.y))}}const o=(...a)=>{console.log("[my-devlog]",...a)};const L=()=>{const a=i.exports.useRef(null);i.exports.useRef(-21),i.exports.useRef(-4);const s={debug:!1,backgroundImageNoRepeat:!0,moveToCenterWhenRefresh:!0,zoomToFitWhenRefresh:!0,useAnimationWhenRefresh:!1,placeOtherGroup:!0,defaultNodeWidth:150,defaultNodeHeight:30,defaultLineWidth:2,defaultLineShape:6,defaultLineTextOffset_x:-21,defaultLineTextOffset_y:-4,lineUseTextPath:!1,layout:{layoutName:"tree",from:"left"}},e=async()=>{var t;const r={rootId:"2",nodes:[{id:"2",text:"ALTXX"},{id:"3",text:"CH2 TTN"},{id:"4",text:"CH1 AlCu"},{id:"5",text:"MainFrame"},{id:"14",text:"ArHigh"},{id:"15",text:"ArLow"},{id:"20",text:"N2"},{id:"22",text:"Cool Chbr"},{id:"24",text:"Alignment Unit"}],lines:[{from:"2",to:"5",text:"\u5B50\u7CFB\u7EDF",showEndArrow:!1},{from:"2",to:"3",text:"\u5B50\u7CFB\u7EDF",showEndArrow:!1},{from:"2",to:"4",text:"\u5B50\u7CFB\u7EDF",showEndArrow:!1},{from:"3",to:"20",text:"\u5B50\u7CFB\u7EDF"},{from:"4",to:"15",text:"\u5B50\u7CFB\u7EDF"},{from:"4",to:"14",text:"\u5B50\u7CFB\u7EDF"},{from:"5",to:"24",text:"\u5B50\u7CFB\u7EDF"},{from:"5",to:"22",text:"\u5B50\u7CFB\u7EDF"}]},n=(t=a.current)==null?void 0:t.getInstance();if(n){const l=new m({},n.options);await n.setLayouter(l),await n.setJsonData(r),await n.moveToCenter(),await n.zoomToFit()}};return i.exports.useEffect(()=>{e()},[]),u("div",{children:u("div",{style:{height:"100vh",position:"relative",fontSize:"12px",lineHeight:"30px"},children:u(y,{ref:a,options:s})})})};export{L as default};
