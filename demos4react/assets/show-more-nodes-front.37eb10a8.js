import{r as m,a as d,j as I}from"./index.7473cb17.js";import{u as C}from"./relation-graph.26f01d58.js";const $=()=>{const l=m.exports.useRef(null),u={debug:!1,lineUseTextPath:!0,useAnimationWhenExpanded:!0,layout:{layoutName:"tree",from:"left",min_per_width:"400",max_per_width:"400",min_per_height:"40",max_per_height:"50",enableGatherNodes:!1,levelDistance:"200,300,200,300,200,300,200,300,200,300,200,300,200,300,200,300"},defaultNodeShape:1,defaultLineShape:4,defaultJunctionPoint:"lr",defaultNodeBorderWidth:0,defaultLineColor:"#dddddd",defaultNodeColor:"transparent"},p=async()=>{const e={rootId:"root",nodes:[{id:"root",text:"Tian Technology Co., Ltd.",offset_x:0,data:{type:"root"}},{id:"gudong",text:"Shareholders",offset_x:-80,data:{type:"level1"}},{id:"gaoguan",text:"Executives",offset_x:-80,data:{type:"level1"}},{id:"duiwaitouzi",text:"External Investment",offset_x:80,data:{type:"level1"}},{id:"fenzhijigou",text:"Branches",offset_x:80,data:{type:"level1"}}],lines:[{from:"gudong",to:"root",lineShape:3},{from:"gaoguan",to:"root",lineShape:3},{from:"root",to:"duiwaitouzi",lineShape:3},{from:"root",to:"fenzhijigou",lineShape:3}]},t=l.current.getInstance();f("gudong","left",e),f("gaoguan","left",e),f("fenzhijigou","right",e),f("duiwaitouzi","right",e),await t.setJsonData(e,!0),await t.playShowEffect(),await N()},y=(e,t)=>{console.log("onNodeClick:",e)},N=async()=>{const e=l.current.getInstance(),t=e.getNodes();let o=[],r=[];const i=3;t.forEach(a=>{if(!a.lot||!a.lot.childs)return;let n=a.targetTo;n.length>i&&(n.slice(2).forEach(h=>{h.isHide=!0}),r.push({id:`${a.id}-to-more`,text:`Show More T(${n.length-i})`,alignItems:"left",data:{type:"btn-more-to"}}),o.push({from:a.id,to:`${a.id}-to-more`})),n=a.targetFrom,n.length>2&&(n.slice(2).forEach(h=>{h.isHide=!0}),r.push({id:`${a.id}-from-more`,text:`Show More F(${n.length-i})`,alignItems:"right",data:{type:"btn-more-from"}}),o.push({from:`${a.id}-from-more`,to:a.id}))}),e.addNodes(r),e.addLines(o),await e.doLayout(),await e.setZoom(80)},x=e=>{const t=l.current.getInstance();if(e.data.type==="btn-more-to"){const o=e.lot.parent.targetTo,r=3;let i=0,a=0;for(const s of o)if(s.isHide===!0&&(s.isHide=!1,a++),s.isHide!==!0&&i++,a>=r)break;i>=o.length&&t.removeNodeById(e.id);const n=t.getNodeById(e.id);n.text=`Show More (${o.length-i-1})`,t.doLayout()}if(e.data.type==="btn-more-from"){const o=e.lot.parent.targetFrom,r=3;let i=0,a=0;for(const s of o)if(s.isHide===!0&&(s.isHide=!1,a++),s.isHide!==!0&&i++,a>=r)break;const n=t.getNodeById(e.id);n.text=`Show More (${o.length-i-1})`,i>=o.length&&t.removeNodeById(e.id),t.doLayout()}},w=(e,t,o)=>{console.log("onLineClick:",e)},f=(e,t,o)=>{const r=1+Math.floor(Math.random()*30);for(let i=0;i<r;i++){const n="N"+S++,s=`Beijing ${g[Math.floor(Math.random()*g.length)]} No.${n} Company`,v={id:n,text:s,expanded:!1,alignItems:t==="left"?"right":"left"};let c;t==="left"?c={from:n,to:e}:c={from:e,to:n},o.nodes.push(v),o.lines.push(c)}};m.exports.useEffect(()=>{p()},[]);let S=1;const g=["","Tianxing","Starry Night","Gathering Storm","Jin Kaibinski"];return d("div",{children:d("div",{style:{height:"100vh"},children:d(C,{ref:l,options:u,onNodeClick:y,onLineClick:w,nodeSlot:({node:e})=>{var t,o,r,i;return d("div",{children:((t=e.data)==null?void 0:t.type)==="btn-more-from"||((o=e.data)==null?void 0:o.type)==="btn-more-to"?d("div",{className:"my-node more-btn",onClick:()=>x(e),children:e.text}):((r=e.data)==null?void 0:r.type)==="root"?d("div",{className:"my-node my-root",children:e.text}):((i=e.data)==null?void 0:i.type)==="level1"?d("div",{className:"my-node",style:{width:"100px",paddingLeft:"0px",textAlign:"center",backgroundColor:"#2c3e50",color:"#ffffff"},children:e.text}):I("div",{className:"my-node",children:[d("span",{className:"c-circle-flag"}),e.text]})})}})})})};export{$ as default};
