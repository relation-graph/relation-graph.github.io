import{r as h,a as r,j as y,F as b}from"./index.7473cb17.js";import{u as v}from"./relation-graph.26f01d58.js";const L=()=>{const f=h.exports.useRef(null),m=async()=>{var a;const t={rootId:"root",nodes:[{id:"root",text:"Tian Technology Co., Ltd.",offset_x:-50,data:{type:"root"}},{id:"root-invs",text:"Investment",disableDefaultClickEffect:!0,width:80,fontColor:"rgba(15, 71, 255)",expandHolderPosition:"left",expanded:!1,alignItems:"right",data:{type:"ex-btn",childrenLoaded:!1}},{id:"root-sh",text:"Share Holder",disableDefaultClickEffect:!0,width:80,fontColor:"rgba(15, 71, 255)",expandHolderPosition:"left",expanded:!1,alignItems:"left",data:{type:"ex-btn",childrenLoaded:!1}},{id:"root-history-invs",text:"Historical Investment",expandHolderPosition:"left",expanded:!1,alignItems:"left",data:{type:"ex-btn",iconToRight:!0,childrenLoaded:!1}}],lines:[{from:"root",to:"root-invs",showEndArrow:!1},{from:"root-sh",to:"root",showEndArrow:!1},{from:"root-history-invs",to:"root",showEndArrow:!1}]},o=(a=f.current)==null?void 0:a.getInstance();await(o==null?void 0:o.setJsonData(t,!0)),await(o==null?void 0:o.playShowEffect())},p=(t,o)=>{console.log("onNodeClick:",t)},x=(t,o,a)=>{console.log("onLineClick:",t)},u=(t,o)=>{},g=async(t,o)=>{var e;const a=(e=f.current)==null?void 0:e.getInstance();if(console.log("onNodeExpand:",t),t.data.childrenLoaded){console.log("The children of this node have already been loaded");return}t.data.childrenLoaded=!0;const l=await w("/api/getEntInverstments",t);await(a==null?void 0:a.appendJsonData(l,!0)),await(a==null?void 0:a.doLayout())};let i=1;const n=["","Tianxing","Xingyueye","Fengyunjihui","Jinkai Binji"],w=async(t,o)=>new Promise((a,l)=>{setTimeout(function(){const e=o.id,d=o.alignItems,s=d==="left"?-100:100;if(o.data.type==="ex-btn"){const c={nodes:[{id:e+"-c1",text:`Beijing ${n[Math.floor(Math.random()*n.length)]} Company ${i++}`,expandHolderPosition:"left",expanded:!1,alignItems:d,offset_x:s,data:{childrenLoaded:!1}},{id:e+"-c2",text:`Beijing ${n[Math.floor(Math.random()*n.length)]} Company ${i++}`,expandHolderPosition:"left",expanded:!1,alignItems:d,offset_x:s,data:{childrenLoaded:!1}}],lines:[{from:e,to:e+"-c1"},{from:e,to:e+"-c2"},{from:e,to:e+"-more"}]};a(c)}else{const c={nodes:[{id:e+"-invs",text:"Investment",disableDefaultClickEffect:!0,width:80,fontColor:"rgba(15, 71, 255)",expandHolderPosition:"left",expanded:!1,alignItems:d,data:{type:"ex-btn",childrenLoaded:!1}},{id:e+"-sh",text:"Share Holder",disableDefaultClickEffect:!0,width:80,fontColor:"rgba(15, 71, 255)",expandHolderPosition:"left",expanded:!0,alignItems:d,data:{type:"ex-btn",iconToRight:!0,childrenLoaded:!0}},{id:e+"-c1",text:`Beijing ${n[Math.floor(Math.random()*n.length)]} Company ${i++}`,expandHolderPosition:"left",expanded:!1,alignItems:d,offset_x:s,data:{childrenLoaded:!1}},{id:e+"-c2",text:`Beijing ${n[Math.floor(Math.random()*n.length)]} Company ${i++}`,expandHolderPosition:"left",expanded:!1,alignItems:d,offset_x:s,data:{childrenLoaded:!1}},{id:e+"-c3",text:`Beijing ${n[Math.floor(Math.random()*n.length)]} Company ${i++}`,expandHolderPosition:"left",expanded:!1,alignItems:d,offset_x:s,data:{childrenLoaded:!1}}],lines:[{from:e,to:e+"-invs",showEndArrow:!1},{from:e,to:e+"-sh",showEndArrow:!1},{from:e+"-sh",to:e+"-c1",showEndArrow:!1},{from:e+"-sh",to:e+"-c2",showEndArrow:!1},{from:e+"-sh",to:e+"-c3",showEndArrow:!1},{from:e+"-sh",to:e+"-more",showEndArrow:!1}]};a(c)}},200)});return h.exports.useEffect(()=>{m()},[]),r("div",{children:r("div",{className:"relation-graph",style:{height:"100vh"},children:r(v,{ref:f,options:{debug:!1,lineUseTextPath:!0,useAnimationWhenExpanded:!0,layout:{layoutName:"tree",from:"right",min_per_width:"300",max_per_width:"300",min_per_height:"40",max_per_height:"50",enableGatherNodes:!0,levelDistance:"200,300,200,300,200,300,200,300,200,300,200,300,200,300,200,300"},defaultNodeShape:1,defaultLineShape:4,defaultJunctionPoint:"lr",defaultNodeBorderWidth:0,defaultLineColor:"rgba(15, 71, 255)",defaultNodeFontColor:"#333333",defaultNodeColor:"transparent"},onNodeClick:p,onLineClick:x,onNodeExpand:g,onNodeCollapse:u,nodeSlot:({node:t})=>{var o,a,l,e;return y(b,{children:[((o=t.data)==null?void 0:o.type)==="ex-btn"&&r("div",{className:"my-node ex-btn",children:t.text}),((a=t.data)==null?void 0:a.type)==="more-btn"&&r("div",{className:"my-node more-btn",children:t.text}),((l=t.data)==null?void 0:l.type)==="root"&&r("div",{className:"my-node my-root",children:t.text}),!["ex-btn","more-btn","root"].includes((e=t.data)==null?void 0:e.type)&&r("div",{className:"my-node",children:t.text})]})}})})})};export{L as default};
