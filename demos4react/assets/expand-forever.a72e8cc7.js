import{r as d,a as t,j as i,F as x}from"./index.7473cb17.js";import{u as y}from"./relation-graph.26f01d58.js";import{MySwitch as N}from"./RGComponentsForDemo.afa6e56e.js";const S=()=>{const a=d.exports.useRef(null),[s,c]=d.exports.useState(!0),[r,l]=d.exports.useState(!1),h={layout:{layoutName:"tree",from:"bottom",min_per_width:170,max_per_width:170,min_per_height:160},defaultNodeShape:1,defaultLineShape:2,defaultNodeWidth:100,defaultNodeHeight:60,defaultJunctionPoint:"tb",defaultNodeBorderWidth:0,defaultLineColor:"rgba(0, 186, 189, 1)",defaultNodeColor:"rgba(0, 206, 209, 1)",reLayoutWhenExpandedOrCollapsed:!0,defaultExpandHolderPosition:"top",zoomToFitWhenRefresh:!0,useAnimationWhenExpanded:!0,debug:!1};d.exports.useEffect(()=>{u()},[]);const u=async()=>{const e={rootId:"a",nodes:[{id:"a",text:"a"},{id:"b",text:"b"},{id:"b1",text:"b1"},{id:"b2",text:"b2"},{id:"b2-1",text:"b2-1",expandHolderPosition:"top",expanded:!1,data:{isNeedLoadDataFromRemoteServer:!0}},{id:"b2-2",text:"b2-2"}],lines:[{from:"a",to:"b"},{from:"b",to:"b1"},{from:"b",to:"b2"},{from:"b2",to:"b2-1"},{from:"b2",to:"b2-2"}]},o=a.current.getInstance();await o.setJsonData(e),await o.playShowEffect()},f=e=>{a.current.getInstance().options.reLayoutWhenExpandedOrCollapsed=e,c(e)},p=(e,o)=>{},m=(e,o)=>{const n=a.current.getInstance();if(console.log("onNodeExpand:",e),!e.data.isNeedLoadDataFromRemoteServer){console.log("The children of this node do not need to load data from the remote server");return}if(e.data.childrenLoaded){console.log("The children of this node have already been loaded");return}l(!0),e.data.childrenLoaded=!0,b(e,async g=>{l(!1),await n.appendJsonData(g)})},b=(e,o)=>{setTimeout(function(){const n={nodes:[{id:e.id+"-c-1",text:"Child Node 1",expandHolderPosition:"top",expanded:!1,data:{isNeedLoadDataFromRemoteServer:!0}},{id:e.id+"-c-2",text:"Child Node 2"}],lines:[{from:e.id,to:e.id+"-c-1"},{from:e.id,to:e.id+"-c-2"}]};o(n)},1e3)};return t("div",{children:t("div",{className:r?"el-loading-mask":"",style:{height:"100vh"},children:t(y,{ref:a,options:h,onNodeExpand:m,onNodeCollapse:p,graphPlugSlot:i(x,{children:[i("div",{className:"w-96 rounded-lg absolute left-20 top-20 z-20 p-4 bg-white border-solid border-2 border-black shadow-lg",children:[t("div",{className:"c-option-name",children:"After expanding/collapsing a node:"}),t("div",{className:"c-option-name",style:{fontSize:"12px"},children:"(Refers to non-dynamically loaded content, which will definitely be re-layouted after dynamically loading content)"}),t(N,{currentValue:s,onChange:e=>{f(e)}})]}),r&&t("div",{className:"w-full h-full absolute left-0 top-0 z-20 bg-white/50 flex justify-center place-items-center",children:t("div",{className:"w-96 text-white text-center bg-gray-500 rounded-lg",children:"Loading data from remote..."})})]})})})})};export{S as default};
