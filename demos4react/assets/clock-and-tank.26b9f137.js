import{r as l,a as d,j as h,F as f}from"./index.7473cb17.js";import{u as g}from"./relation-graph.26f01d58.js";const b=()=>{const e=l.exports.useRef(null),u=l.exports.useRef(0),r=l.exports.useRef(1),s={lineUseTextPath:!0,defaultLineShape:1,placeSingleNode:!1,moveToCenterWhenRefresh:!0,zoomToFitWhenRefresh:!0,layout:{layoutName:"center",maxLayoutTimes:3e3},allowShowMiniToolBar:!0,defaultNodeWidth:40,defaultNodeHeight:40,defaultNodeBorderWidth:0,defaultNodeColor:"transparent",backgroundColor:"transparent",defaultExpandHolderPosition:"right",defaultLineColor:"rgba(227,226,226,0.3)"},a=()=>{var c;r.current>60&&(r.current=1);const t=e.current.getInstance();r.current===15&&(t==null||t.startAutoLayout()),r.current===18&&(t==null||t.zoomToFit());const i=t==null?void 0:t.graphData.rootNode;r.current<=20&&i&&(i.data.percent=r.current/15),r.current===60&&(i&&(i.data.percent=0),t==null||t.stopAutoLayout(),t==null||t.doLayout(),t==null||t.setZoom(100),t==null||t.zoomToFit());const o=t.getNodeById(r.current.toString()),n=t.getNodeById("current");!o||!n||(n.x=o.x,n.y=o.y,t.emitEvent("node-dragging",{node:n,x:n.x,y:n.y}),t.options.checkedNodeId="current",t.options.checkedLineId=(c=t.getLinks().find(x=>x.toNode.id===o.id))==null?void 0:c.relations[0].id,r.current++,t.dataUpdated())};return l.exports.useEffect(()=>{var i;const t={rootId:"root",nodes:[{id:"root",text:"",width:100,height:100,data:{percent:0}}],lines:[]};for(let o=1;o<61;o++)t.nodes.push({id:o.toString(),text:o.toString()}),t.lines.push({from:"root",to:o.toString(),text:""});return t.nodes.push({id:"current",text:"",x:-20,y:-20}),(i=e.current)==null||i.setJsonData(t,!0,()=>{u.current=setInterval(()=>{a()},500)}),()=>{console.log("beforeDestroy:clear clock:",u.current),clearInterval(u.current)}},[]),d("div",{children:d("div",{style:{height:"100vh"},children:d(g,{ref:e,options:s,nodeSlot:p})})})},p=({node:e})=>h(f,{children:[e.id==="current"&&d("div",{style:{zIndex:555,opacity:.5,lineHeight:"40px",width:"100%",height:"100%",color:"#000000",borderRadius:"50%",boxSizing:"border-box",background:"linear-gradient(to right, #00FFFF, #FF00FF)"},children:e.text}),e.id==="root"&&d("div",{style:{zIndex:555,width:"100%",height:"100%",opacity:.5,lineHeight:"100px",color:"#000000",borderRadius:"50%",boxSizing:"border-box",fontSize:"32px",textAlign:"center",overflow:"hidden",border:"#000000 solid 1px"},children:d("div",{style:{width:"100%",height:`${e.data.percent*100}%`,marginTop:`${(1-e.data.percent)*100}%`,background:"linear-gradient(to bottom, #00FFFF, #FF00FF)"},children:e.text})}),e.id!=="current"&&e.id!=="root"&&d("div",{style:{lineHeight:"40px",width:"100%",height:"100%",border:"#999999 solid 1px",color:"#000000",borderRadius:"50%",boxSizing:"border-box",textAlign:"center"},children:e.text})]});export{b as default};
