import{r as c,a as e,j as t}from"./index.7473cb17.js";import{u as b}from"./relation-graph.26f01d58.js";const g=()=>{const r=c.exports.useRef(null);c.exports.useEffect(()=>{i()},[]);const d={debug:!1,allowSwitchLineShape:!0,allowSwitchJunctionPoint:!0,allowShowDownloadButton:!0,defaultJunctionPoint:"border",placeOtherNodes:!1,placeSingleNode:!1,graphOffset_x:-200,graphOffset_y:100,defaultNodeColor:"#f39930",defaultLineMarker:{markerWidth:20,markerHeight:20,refX:3,refY:3,data:"M 0 0, V 6, L 4 3, Z"},layout:{layoutName:"fixed"}},i=async()=>{var S;const a=[{tableName:"SYS_USER",tableComents:"SYS_USER comments",x:500,y:-300},{tableName:"SYS_DEPT",tableComents:"SYS_DEPT comments",x:0,y:-300},{tableName:"SYS_ROLE",tableComents:"SYS_ROLE comments",x:0,y:0},{tableName:"SYS_USER_ROLE",tableComents:"SYS_USER_ROLE comments",x:500,y:0},{tableName:"SYS_RESOURCE",tableComents:"SYS_RESOURCE comments",x:0,y:300},{tableName:"SYS_ROLE_RESOURCE",tableComents:"SYS_ROLE_RESOURCE comments",x:500,y:300}],l=[{tableName:"SYS_USER",columnName:"id",dataType:"varchar(36)"},{tableName:"SYS_USER",columnName:"user_name",dataType:"varchar(50)"},{tableName:"SYS_USER",columnName:"dept_id",dataType:"varchar(36)"},{tableName:"SYS_USER",columnName:"create_time",dataType:"TIMESTAMP"},{tableName:"SYS_USER",columnName:"status",dataType:"varchar(1)"},{tableName:"SYS_DEPT",columnName:"id",dataType:"varchar(36)"},{tableName:"SYS_DEPT",columnName:"dept_name",dataType:"varchar(50)"},{tableName:"SYS_DEPT",columnName:"parent_dept_id",dataType:"varchar(50)"},{tableName:"SYS_DEPT",columnName:"create_time",dataType:"TIMESTAMP"},{tableName:"SYS_DEPT",columnName:"status",dataType:"varchar(50)"},{tableName:"SYS_ROLE",columnName:"id",dataType:"varchar(36)"},{tableName:"SYS_ROLE",columnName:"role_name",dataType:"varchar(36)"},{tableName:"SYS_ROLE",columnName:"create_time",dataType:"TIMESTAMP"},{tableName:"SYS_USER_ROLE",columnName:"id",dataType:"varchar(36)"},{tableName:"SYS_USER_ROLE",columnName:"user_id",dataType:"varchar(36)"},{tableName:"SYS_USER_ROLE",columnName:"role_id",dataType:"varchar(36)"},{tableName:"SYS_USER_ROLE",columnName:"create_time",dataType:"TIMESTAMP"},{tableName:"SYS_USER_ROLE",columnName:"status",dataType:"varchar(36)"},{tableName:"SYS_RESOURCE",columnName:"id",dataType:"varchar(36)"},{tableName:"SYS_RESOURCE",columnName:"resource_name",dataType:"varchar(36)"},{tableName:"SYS_RESOURCE",columnName:"create_time",dataType:"TIMESTAMP"},{tableName:"SYS_ROLE_RESOURCE",columnName:"id",dataType:"varchar(36)"},{tableName:"SYS_ROLE_RESOURCE",columnName:"role_id",dataType:"varchar(36)"},{tableName:"SYS_ROLE_RESOURCE",columnName:"resource_id",dataType:"varchar(36)"},{tableName:"SYS_ROLE_RESOURCE",columnName:"status",dataType:"varchar(1)"}],n=[{sourceTableName:"SYS_USER",sourceColumnName:"dept_id",type:"MORE_TO_ONE",targetTableName:"SYS_DEPT",targetColumnName:"id"},{sourceTableName:"SYS_DEPT",sourceColumnName:"parent_dept_id",type:"ONE_TO_ONE",targetTableName:"SYS_DEPT",targetColumnName:"id"},{sourceTableName:"SYS_USER_ROLE",sourceColumnName:"user_id",type:"MORE_TO_ONE",targetTableName:"SYS_USER",targetColumnName:"id"},{sourceTableName:"SYS_USER_ROLE",sourceColumnName:"role_id",type:"MORE_TO_ONE",targetTableName:"SYS_ROLE",targetColumnName:"id"},{sourceTableName:"SYS_ROLE_RESOURCE",sourceColumnName:"role_id",type:"MORE_TO_ONE",targetTableName:"SYS_ROLE",targetColumnName:"id"},{sourceTableName:"SYS_ROLE_RESOURCE",sourceColumnName:"resource_id",type:"MORE_TO_ONE",targetTableName:"SYS_RESOURCE",targetColumnName:"id"}],s=a.map(o=>{const{tableName:u,tableComents:E,x:p,y:R}=o;return{id:u,text:E,x:p,y:R,nodeShape:1,data:{columns:l.filter(h=>h.tableName===o.tableName)}}}),N=n.map(o=>({from:o.sourceTableName+"-"+o.sourceColumnName,to:o.targetTableName+"-"+o.targetColumnName,color:o.type==="ONE_TO_ONE"?"rgba(29,169,245,0.76)":"rgba(159,23,227,0.65)",text:"",fromJunctionPoint:"left",toJunctionPoint:"lr",lineShape:6,lineWidth:3})),_={nodes:s,lines:[],elementLines:N},m=(S=r.current)==null?void 0:S.getInstance();m&&(await m.setJsonData(_),await m.moveToCenter(),await m.zoomToFit())};return e("div",{children:t("div",{className:"my-graph",style:{height:"100vh"},children:[t("div",{style:{zIndex:300,position:"absolute",left:"10px",top:"calc(100% - 50px)",fontSize:"12px",backgroundColor:"#ffffff",border:"#efefef solid 1px",borderRadius:"10px",width:"260px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:["Legend\uFF1A",t("div",{children:["More to one",e("div",{style:{height:"5px",width:"80px",backgroundColor:"rgba(159,23,227,0.65)"}})]}),t("div",{style:{marginLeft:"10px"},children:["One to one",e("div",{style:{height:"5px",width:"80px",backgroundColor:"rgba(29,169,245,0.76)"}})]})]}),e(b,{ref:r,options:d,onNodeClick:(a,l)=>{console.log("onNodeClick:",a)},onLineClick:(a,l,n)=>{console.log("onLineClick:",a)},nodeSlot:({node:a})=>t("div",{style:{width:"300px",backgroundColor:"#f39930"},children:[t("div",{children:[a.text," - ",a.data.columns.length," Cols"]}),t("table",{className:"c-data-table",children:[e("thead",{children:t("tr",{children:[e("th",{children:"Column Name"}),e("th",{children:"Data Type"})]})}),e("tbody",{children:a.data.columns.map(l=>t("tr",{children:[e("td",{children:e("div",{id:`${a.id}-${l.columnName}`,children:l.columnName})}),e("td",{children:l.dataType})]},l.columnName))})]})]})})]})})};export{g as default};
