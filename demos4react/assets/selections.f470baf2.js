import{r as c,a as n,j as l}from"./index.7473cb17.js";import{u as E}from"./relation-graph.26f01d58.js";import{I as _}from"./index.e712a3dd.js";const k=()=>{const a=c.exports.useRef(null),[d,p]=c.exports.useState(!1),[x,g]=c.exports.useState([]),C={debug:!1,allowSwitchLineShape:!0,allowSwitchJunctionPoint:!0,allowShowDownloadButton:!0,defaultJunctionPoint:"border",placeOtherNodes:!1,placeSingleNode:!1,defaultNodeColor:"#f39930",defaultNodeBorderWidth:1,defaultNodeBorderColor:"#f39930",defaultLineColor:"#f39930",defaultLineWidth:2,defaultLineTextOffset_y:-2,disableDragCanvas:!1,layout:{layoutName:"center"}},v=async()=>{var e;const t={rootId:"2",nodes:[{id:"1",text:"Node-1",data:{myicon:"el-icon-star-on"}},{id:"2",text:"Node-2",data:{myicon:"el-icon-setting"}},{id:"3",text:"Node-3",data:{myicon:"el-icon-setting"}},{id:"4",text:"Node-4",data:{myicon:"el-icon-star-on"}},{id:"6",text:"Node-6",data:{myicon:"el-icon-setting"}},{id:"7",text:"Node-7",data:{myicon:"el-icon-setting"}},{id:"8",text:"Node-8",data:{myicon:"el-icon-star-on"}},{id:"9",text:"Node-9",data:{myicon:"el-icon-headset"}},{id:"71",text:"Node-71",data:{myicon:"el-icon-headset"}},{id:"72",text:"Node-72",data:{myicon:"el-icon-s-tools"}},{id:"73",text:"Node-73",data:{myicon:"el-icon-star-on"}},{id:"81",text:"Node-81",data:{myicon:"el-icon-s-promotion"}},{id:"82",text:"Node-82",data:{myicon:"el-icon-s-promotion"}},{id:"83",text:"Node-83",data:{myicon:"el-icon-star-on"}},{id:"84",text:"Node-84",data:{myicon:"el-icon-s-promotion"}},{id:"85",text:"Node-85",data:{myicon:"el-icon-sunny"}},{id:"91",text:"Node-91",data:{myicon:"el-icon-sunny"}},{id:"92",text:"Node-82",data:{myicon:"el-icon-sunny"}},{id:"51",text:"Node-51",data:{myicon:"el-icon-sunny"}},{id:"52",text:"Node-52",data:{myicon:"el-icon-sunny"}},{id:"53",text:"Node-53",data:{myicon:"el-icon-sunny"}},{id:"54",text:"Node-54",data:{myicon:"el-icon-sunny"}},{id:"55",text:"Node-55",data:{myicon:"el-icon-sunny"}},{id:"5",text:"Node-5",data:{myicon:"el-icon-sunny"}}],lines:[{from:"7",to:"71"},{from:"7",to:"72"},{from:"7",to:"73"},{from:"8",to:"81"},{from:"8",to:"82"},{from:"8",to:"83"},{from:"8",to:"84"},{from:"8",to:"85"},{from:"9",to:"91"},{from:"9",to:"92"},{from:"5",to:"51"},{from:"5",to:"52"},{from:"5",to:"53"},{from:"5",to:"54"},{from:"5",to:"55"},{from:"1",to:"2"},{from:"3",to:"1"},{from:"4",to:"2"},{from:"6",to:"2"},{from:"7",to:"2"},{from:"8",to:"2"},{from:"9",to:"2"},{from:"1",to:"5"}]},o=(e=a.current)==null?void 0:e.getInstance();await(o==null?void 0:o.setJsonData(t)),await(o==null?void 0:o.playShowEffect())},b=()=>{var o;const t=(o=a.current)==null?void 0:o.getInstance();t&&(t.options.disableDragCanvas=d,t.dataUpdated())},S=(t,o)=>{var s;console.log("onCanvasSelectionEnd:",t);const e=(s=a.current)==null?void 0:s.getInstance();if(e){const r=e.getBoundingClientRect(),f=e.getCanvasCoordinateByClientCoordinate({x:t.x+r.x,y:t.y+r.y}),u=e.getCanvasCoordinateByClientCoordinate({x:t.x+t.width+r.x,y:t.y+t.height+r.y});e.getNodes().forEach(i=>{let y=!1;const h=i.x+i.el.offsetWidth/2,N=i.y+i.el.offsetHeight/2;h>f.x&&N>f.y&&h<u.x&&N<u.y&&(y=!0),i.selected=y}),m()}},D=()=>{w()},w=()=>{var o;const t=(o=a.current)==null?void 0:o.getInstance();t&&(t.getNodes().forEach(e=>{e.selected=!1}),m())},m=()=>{var e;const t=[],o=(e=a.current)==null?void 0:e.getInstance();o&&(o.getNodes().forEach(s=>{s.selected&&t.push(s)}),g(t),o.dataUpdated())};c.exports.useEffect(()=>{v()},[]),c.exports.useEffect(()=>{b()},[d]);const I=({node:t})=>n(_,{size:"50px",name:"cloud_on"});return n("div",{children:l("div",{style:{height:"100vh"},children:[l("div",{className:"c-my-panel w-96 rounded-lg absolute left-20 top-20 z-20 p-4 bg-white border-solid border-2 border-black shadow-lg",children:[n("div",{className:"c-option-name",children:"Operation Instructions:"}),n("div",{className:"c-option-name",children:"Method 1: Hold Shift to select"}),n("div",{className:"c-option-name",children:"Method 2: Disable drag canvas to support selection"}),n("div",{className:"c-option-name",children:n("button",{className:`c-my-button ${d?"c-my-button-checked":""}`,onClick:()=>{p(!d)},children:d?"Disable Drag Canvas":"Enable Drag Canvas"})}),l("div",{className:"c-option-name",children:["Number of selected nodes: ",x.length]})]}),n(E,{ref:a,options:C,onCanvasSelectionEnd:S,onCanvasClick:D,nodeSlot:I})]})})};export{k as default};
