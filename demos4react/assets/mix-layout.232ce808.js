import{r as p,a as u}from"./index.7473cb17.js";import{u as G,s as f}from"./relation-graph.26f01d58.js";const v=()=>{const d=p.exports.useRef(null),m=p.exports.useRef(0),y={debug:!1,layout:{layoutName:"fixed"},defaultPolyLineRadius:10,defaultNodeShape:1,defaultLineShape:3,defaultJunctionPoint:"ltrb",defaultNodeBorderWidth:0,allowShowRefreshButton:!1,defaultLineColor:"rgba(0, 186, 189, 1)",defaultNodeColor:"rgba(0, 206, 209, 1)"},s=async()=>{const t={rootId:"my-root",nodes:[{id:"my-root",text:"Root Node",x:0,y:0,nodeShape:1,width:200,height:100,junctionPoint:"ltrb"},{id:"r",text:"R",data:{myGroupId:"left"}},{id:"R-b",text:"R-b",data:{myGroupId:"left"}},{id:"R-b-1",text:"R-b-1",data:{myGroupId:"left"}},{id:"R-b-2",text:"R-b-2",data:{myGroupId:"left"}},{id:"R-b-3",text:"R-b-3",data:{myGroupId:"left"}},{id:"R-c",text:"R-c",data:{myGroupId:"left"}},{id:"R-c-1",text:"R-c-1",data:{myGroupId:"left"}},{id:"R-c-2",text:"R-c-2",data:{myGroupId:"left"}},{id:"R-d",text:"R-d",data:{myGroupId:"left"}},{id:"R-d-1",text:"R-d-1",data:{myGroupId:"left"}},{id:"R-d-2",text:"R-d-2",data:{myGroupId:"left"}},{id:"R-d-3",text:"R-d-3",data:{myGroupId:"left"}},{id:"a",text:"a",data:{myGroupId:"right"}},{id:"c",text:"c",data:{myGroupId:"right"}},{id:"c1",text:"c1",data:{myGroupId:"right"}},{id:"c1-1",text:"c1-1",data:{myGroupId:"right"}},{id:"c1-2",text:"c1-2",data:{myGroupId:"right"}},{id:"c1-3",text:"c1-3",data:{myGroupId:"right"}},{id:"c1-4",text:"c1-4",data:{myGroupId:"right"}},{id:"c1-5",text:"c1-5",data:{myGroupId:"right"}},{id:"c1-6",text:"c1-6",data:{myGroupId:"right"}},{id:"c1-7",text:"c1-7",data:{myGroupId:"right"}},{id:"c2",text:"c2",data:{myGroupId:"right"}},{id:"c2-1",text:"c2-1",data:{myGroupId:"right"}},{id:"c2-2",text:"c2-2",data:{myGroupId:"right"}},{id:"c3",text:"c3",data:{myGroupId:"right"}},{id:"c3-1",text:"c3-1",data:{myGroupId:"right"}},{id:"c3-2",text:"c3-2",data:{myGroupId:"right"}},{id:"c3-3",text:"c3-3",data:{myGroupId:"right"}},{id:"t",text:"t",data:{myGroupId:"top"}},{id:"t1",text:"t1",data:{myGroupId:"top"}},{id:"t1-1",text:"t1-1",data:{myGroupId:"top"}},{id:"t1-2",text:"t1-2",data:{myGroupId:"top"}},{id:"t1-3",text:"t1-3",data:{myGroupId:"top"}},{id:"t1-4",text:"t1-4",data:{myGroupId:"top"}},{id:"t1-5",text:"t1-5",data:{myGroupId:"top"}},{id:"t1-6",text:"t1-6",data:{myGroupId:"top"}},{id:"t2",text:"t2",data:{myGroupId:"top"}},{id:"t2-1",text:"t2-1",data:{myGroupId:"top"}},{id:"t2-2",text:"t2-2",data:{myGroupId:"top"}},{id:"t2-3",text:"t2-3",data:{myGroupId:"top"}},{id:"t2-4",text:"t2-4",data:{myGroupId:"top"}},{id:"t2-5",text:"t2-5",data:{myGroupId:"top"}},{id:"t2-6",text:"t2-6",data:{myGroupId:"top"}},{id:"t2-7",text:"t2-7",data:{myGroupId:"top"}},{id:"t2-8",text:"t2-8",data:{myGroupId:"top"}},{id:"t2-9",text:"t2-9",data:{myGroupId:"top"}},{id:"e",text:"e",data:{myGroupId:"bottom"}},{id:"e1",text:"e1",data:{myGroupId:"bottom"}},{id:"e1-1",text:"e1-1",data:{myGroupId:"bottom"}},{id:"e1-2",text:"e1-2",data:{myGroupId:"bottom"}},{id:"e1-3",text:"e1-3",data:{myGroupId:"bottom"}},{id:"e1-4",text:"e1-4",data:{myGroupId:"bottom"}},{id:"e1-5",text:"e1-5",data:{myGroupId:"bottom"}},{id:"e1-6",text:"e1-6",data:{myGroupId:"bottom"}},{id:"e2",text:"e2",data:{myGroupId:"bottom"}},{id:"e2-1",text:"e2-1",data:{myGroupId:"bottom"}},{id:"e2-2",text:"e2-2",data:{myGroupId:"bottom"}},{id:"e2-3",text:"e2-3",data:{myGroupId:"bottom"}},{id:"e2-4",text:"e2-4",data:{myGroupId:"bottom"}},{id:"e2-5",text:"e2-5",data:{myGroupId:"bottom"}},{id:"e2-6",text:"e2-6",data:{myGroupId:"bottom"}},{id:"e2-7",text:"e2-7",data:{myGroupId:"bottom"}},{id:"e2-8",text:"e2-8",data:{myGroupId:"bottom"}},{id:"e2-9",text:"e2-9",data:{myGroupId:"bottom"}},{id:"br-root",text:"BR-Root",data:{myGroupId:"bottom-right"}},{id:"br-c",text:"br-c",data:{myGroupId:"bottom-right"}},{id:"br-c1",text:"br-c1",data:{myGroupId:"bottom-right"}},{id:"br-c1-1",text:"c1-1",data:{myGroupId:"bottom-right"}},{id:"br-c1-2",text:"c1-2",data:{myGroupId:"bottom-right"}},{id:"br-c1-3",text:"br-c1-3",data:{myGroupId:"bottom-right"}},{id:"br-c1-4",text:"c1-4",data:{myGroupId:"bottom-right"}},{id:"br-c1-5",text:"c1-5",data:{myGroupId:"bottom-right"}},{id:"br-c1-6",text:"br-c1-6",data:{myGroupId:"bottom-right"}},{id:"br-c1-7",text:"c1-7",data:{myGroupId:"bottom-right"}},{id:"br-c2",text:"c2",data:{myGroupId:"bottom-right"}},{id:"br-c2-1",text:"br-c2-1",data:{myGroupId:"bottom-right"}},{id:"br-c2-2",text:"c2-2",data:{myGroupId:"bottom-right"}},{id:"br-c3",text:"c3",data:{myGroupId:"bottom-right"}},{id:"br-c3-1",text:"br-c3-1",data:{myGroupId:"bottom-right"}},{id:"br-c3-2",text:"c3-2",data:{myGroupId:"bottom-right"}},{id:"br-c3-3",text:"c3-3",data:{myGroupId:"bottom-right"}}],lines:[{from:"my-root",to:"r",forDisplayOnly:!0},{to:"R-b",from:"r"},{to:"R-b-1",from:"R-b"},{to:"R-b-2",from:"R-b"},{to:"R-b-3",from:"R-b"},{to:"R-c",from:"r"},{to:"R-c-1",from:"R-c"},{to:"R-c-2",from:"R-c"},{to:"R-d",from:"r"},{to:"R-d-1",from:"R-d"},{to:"R-d-2",from:"R-d"},{to:"R-d-3",from:"R-d"},{from:"my-root",to:"a",lineShape:4,forDisplayOnly:!0},{from:"a",to:"c"},{from:"c",to:"c1"},{from:"c1",to:"c1-1"},{from:"c1",to:"c1-2"},{from:"c1",to:"c1-3"},{from:"c1",to:"c1-4"},{from:"c1",to:"c1-5"},{from:"c1",to:"c1-6"},{from:"c1",to:"c1-7"},{from:"c",to:"c2"},{from:"c2",to:"c2-1"},{from:"c2",to:"c2-2"},{from:"c",to:"c3"},{from:"c3",to:"c3-1"},{from:"c3",to:"c3-2"},{from:"c3",to:"c3-3"},{from:"my-root",to:"t",forDisplayOnly:!0},{from:"t",to:"t1"},{from:"t1",to:"t1-1"},{from:"t1",to:"t1-2"},{from:"t1",to:"t1-3"},{from:"t1",to:"t1-4"},{from:"t1",to:"t1-5"},{from:"t1",to:"t1-6"},{from:"t",to:"t2"},{from:"t2",to:"t2-1"},{from:"t2",to:"t2-2"},{from:"t2",to:"t2-3"},{from:"t2",to:"t2-4"},{from:"t2",to:"t2-5"},{from:"t2",to:"t2-6"},{from:"t2",to:"t2-7"},{from:"t2",to:"t2-8"},{from:"t2",to:"t2-9"},{from:"my-root",to:"e",forDisplayOnly:!0},{from:"e",to:"e1"},{from:"e1",to:"e1-1"},{from:"e1",to:"e1-2"},{from:"e1",to:"e1-3"},{from:"e1",to:"e1-4"},{from:"e1",to:"e1-5"},{from:"e1",to:"e1-6"},{from:"e",to:"e2"},{from:"e2",to:"e2-1"},{from:"e2",to:"e2-2"},{from:"e2",to:"e2-3"},{from:"e2",to:"e2-4"},{from:"e2",to:"e2-5"},{from:"e2",to:"e2-6"},{from:"e2",to:"e2-7"},{from:"e2",to:"e2-8"},{from:"e2",to:"e2-9"},{from:"my-root",to:"br-root",lineShape:6,fromJunctionPoint:"right",toJunctionPoint:"top",forDisplayOnly:!0},{from:"br-root",to:"br-c"},{from:"br-root",to:"br-c1"},{from:"br-c1",to:"br-c1-1"},{from:"br-c1",to:"br-c1-2"},{from:"br-c1",to:"br-c1-3"},{from:"br-c1",to:"br-c1-4"},{from:"br-c1",to:"br-c1-5"},{from:"br-c1",to:"br-c1-6"},{from:"br-c1",to:"br-c1-7"},{from:"br-c",to:"br-c2"},{from:"br-c2",to:"br-c2-1"},{from:"br-c2",to:"br-c2-2"},{from:"br-c",to:"br-c3"},{from:"br-c3",to:"br-c3-1"},{from:"br-c3",to:"br-c3-2"},{from:"br-c3",to:"br-c3-3"}]},e=d.current.getInstance();e.loading("Wait..."),await e.setJsonData(t),await e.sleep(500),await l(),await b(),await x(),await I(),await g(),await e.moveToCenter(),await e.zoomToFit(),e.clearLoading()},l=async()=>{const t=d.current.getInstance(),e=t.getNodes().filter(r=>r.data&&r.data.myGroupId==="left");t.getLinks().forEach(r=>{e.indexOf(r.fromNode)!==-1&&e.indexOf(r.toNode)!==-1&&r.relations.forEach(o=>{o.lineShape=4,o.color="#df7f03"})});const i=t.graphData.rootNode,a=t.getNodeById("r");a.y=i.y+(i.el.offsetHeight-a.el.offsetHeight)/2,a.x=i.x-300;const c=f.createLayout({layoutName:"tree",from:"right"},t.options,t);c.isMainLayouer=!1,c.layoutOptions.fixedRootNode=!0,await c.placeNodes(e,a)},b=async()=>{const t=d.current.getInstance(),e=t.getNodes().filter(r=>r.data&&r.data.myGroupId==="right"),i=t.graphData.rootNode,a=t.getNodeById("a");a.y=i.y-200,a.x=i.x+500;const c=f.createLayout({layoutName:"tree",from:"left",max_per_height:50},t.options,t);c.isMainLayouer=!1,c.layoutOptions.fixedRootNode=!0,await c.placeNodes(e,a),e.forEach(r=>{r.lot&&r.lot.childs.length>0&&(r.expandHolderPosition="right")})},x=async()=>{const t=d.current.getInstance(),e=t.getNodes().filter(o=>o.data&&o.data.myGroupId==="top");e.forEach(o=>{o.junctionPoint="border",o.width=80,o.height=80,o.nodeShape=0}),t.getLinks().forEach(o=>{e.indexOf(o.fromNode)!==-1&&e.indexOf(o.toNode)!==-1&&o.relations.forEach(n=>{n.lineShape=1})});const i=t.graphData.rootNode,a=t.getNodeById("t");a.x=i.x+1,a.y=i.y-500,a.force_weight=800;const c={layoutName:"force"};c.force_node_repulsion=.2,c.force_line_elastic=1.5,c.maxLayoutTimes=8e4;const r=f.createLayout(c,t.options,t);r.isMainLayouer=!1,r.requireLinks=!1,r.layoutOptions.fixedRootNode=!0,await r.placeNodes(e,a),await h(a,a.x)},h=async(t,e)=>{m.current=setInterval(()=>{const i=d.current.getInstance();t.x=e+Math.floor(Math.random()*2e3-1e3),i.emitEvent("node-dragging",{node:t,x:t.x,y:t.y})},3e3)},I=async()=>{const t=d.current.getInstance(),e=t.getNodes().filter(o=>o.data&&o.data.myGroupId==="bottom");e.forEach(o=>{o.junctionPoint="border",o.width=80,o.height=80,o.nodeShape=0}),t.getLinks().forEach(o=>{e.indexOf(o.fromNode)!==-1&&e.indexOf(o.toNode)!==-1&&o.relations.forEach(n=>{n.lineShape=1})});const i=t.graphData.rootNode,a=t.getNodeById("e");a.x=i.x-300,a.y=i.y+700;const c={layoutName:"center"};c.distance_coefficient=.5;const r=f.createLayout(c,t.options,t);r.isMainLayouer=!1,r.layoutOptions.fixedRootNode=!0,await r.placeNodes(e,a)},g=async()=>{const t=d.current.getInstance(),e=t.getNodes().filter(o=>o.data&&o.data.myGroupId==="bottom-right");e.forEach(o=>{o.junctionPoint="tb",o.width=80,o.height=80,o.el.offsetWidth=80,o.el.offsetHeight=80,o.nodeShape=0}),t.getLinks().forEach(o=>{e.indexOf(o.fromNode)!==-1&&e.indexOf(o.toNode)!==-1&&o.relations.forEach(n=>{n.lineShape=4})});const i=t.graphData.rootNode,a=t.getNodeById("br-root");a.x=i.x+900,a.y=i.y+300;const c={layoutName:"tree",from:"top",max_per_height:160},r=f.createLayout(c,t.options,t);r.isMainLayouer=!1,r.layoutOptions.fixedRootNode=!0,await r.placeNodes(e,a)};return p.exports.useEffect(()=>(s(),()=>{console.log("beforeUnmount:clear timer"),clearInterval(m.current)}),[]),u("div",{children:u("div",{style:{height:"100vh"},children:u(G,{ref:d,options:y,onNodeClick:(t,e)=>{},onLineClick:(t,e,i)=>{},nodeSlot:N})})})},N=({node:d})=>{let m="";return d.id==="my-root"?m="my-root-node c-valign-center":d.data&&d.data.myGroupId==="left"?m="c-left-node c-valign-center":d.data&&d.data.myGroupId==="right"?m="c-right-node c-valign-center":d.data&&d.data.myGroupId==="top"?m="c-top-node c-valign-center":d.data&&d.data.myGroupId==="bottom"?m="c-bottom-node c-valign-center":m="c-bottom-right-node c-valign-center",u("div",{className:m,children:d.text})};export{v as default};
