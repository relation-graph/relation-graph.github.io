import{r as N,a as s,j as m}from"./index.7473cb17.js";import{u as T}from"./relation-graph.26f01d58.js";import{MyLinkButton as u,ElNotification as C}from"./RGComponentsForDemo.afa6e56e.js";import{d as B}from"./Demo4AdvDataFilterData.8ea19753.js";const P=()=>{const i=N.exports.useRef(null),d=N.exports.useRef({x:0,y:0}),g={debug:!1,defaultNodeBorderWidth:0,defaultNodeColor:"rgba(238, 178, 94, 1)",allowSwitchLineShape:!0,allowSwitchJunctionPoint:!0,defaultLineShape:1,layouts:[{label:"Auto Layout",layoutName:"force",layoutClassName:"seeks-layout-force"}],defaultJunctionPoint:"border"};N.exports.useEffect(()=>{L()},[]);const L=async()=>{var e;const o=B,t=(e=i.current)==null?void 0:e.getInstance();await(t==null?void 0:t.setJsonData(o)),await(t==null?void 0:t.moveToCenter()),await(t==null?void 0:t.zoomToFit()),setTimeout(()=>{t==null||t.stopAutoLayout()},1e3)},v=(o,t)=>{console.log("onNodeClick:",o),C({title:"Click Node:",message:"Clicked node: "+o.text})},p=(o,t,e)=>{console.log("onLineClick:",o),C({title:"Click Line:",type:"success",message:"Clicked line: "+t.fromNode.text+" to "+t.toNode.text})},x=async o=>{const t=i.current.getInstance();await(t==null?void 0:t.focusNodeById(o)),t.dataUpdated()},h=()=>{const o=i.current.getInstance(),t=o==null?void 0:o.getNodeById("N6");t&&(t.opacity=t.opacity===.3?1:.3,o.dataUpdated())},w=o=>{const t=i.current.getInstance(),e=t==null?void 0:t.getNodeById("N8"),l=t==null?void 0:t.getNodeById(o);e&&l&&k(e,l.x-50,l.y)},A=()=>{var e;const o=(e=i.current)==null?void 0:e.getInstance(),t=o==null?void 0:o.getNodeById("N1");if(t){const l=(o==null?void 0:o.getNodes().length)+1,a=(o==null?void 0:o.getNodes().length)+2,n="xiaodi-"+l,r="xiaodi-"+a,c={nodes:[{id:n,text:"Follower-"+l,x:t.x+80,y:t.y},{id:r,text:"Follower-"+a,x:t.x-80,y:t.y}],lines:[{from:t.id,to:n,text:"Follower"},{from:t.id,to:r,text:"Follower"}]};o==null||o.addNodes(c.nodes),o==null||o.addLines(c.lines),o==null||o.startAutoLayout()}},k=(o,t,e,l,a,n,r)=>{l===void 0&&(d.current.x=t,d.current.y=e,l=o.x-t,a=o.y-e,n=l<0?-1:1,r=a<0?-1:1);let c=Math.abs(o.x-t)/20,y=Math.abs(o.y-e)/20;c<4&&(c=4),y<4&&(y=4);let f=!0;n===-1?o.x<d.current.x&&(o.x+=c,f=!1):o.x>d.current.x&&(o.x-=c,f=!1),r===-1?o.y<d.current.y&&(o.y+=y,f=!1):o.y>d.current.y&&(o.y-=y,f=!1),i.current.getInstance().dataUpdated(),f||setTimeout(()=>{k(o,t,e,l,a,n,r)},50)};return s("div",{children:m("div",{style:{height:"100vh"},children:[m("div",{className:"c-my-panel w-96 px-4 rounded-lg absolute left-20 top-20 z-20 p-4 bg-white border-solid border-2 border-black shadow-lg",children:[s(u,{onClick:()=>x("N5"),children:"Locate to [Lu Yi Ke]"}),s(u,{onClick:()=>x("N3"),children:"Locate to [Qi Tong Wei]"}),s(u,{onClick:h,children:"Make [Gao Yu Liang] Transparent"}),s(u,{onClick:()=>w("N3"),children:"Move [Gao Xiao Qin] to [Qi Tong Wei]"}),s(u,{onClick:()=>w("N6"),children:"Move [Gao Xiao Qin] to [Gao Yu Liang]"}),s(u,{onClick:A,children:"Add Two Followers to [Hou Liang Ping]"})]}),s(T,{ref:i,options:g,onNodeClick:v,onLineClick:p,nodeSlot:M})]})})},M=({node:i})=>{var d;return m("div",{className:"h-full",children:[s("div",{className:"my-node-style",style:{backgroundImage:`url(${(d=i.data)==null?void 0:d.icon})`}}),s("div",{className:"c-node-name",style:{color:i.color},children:i.text})]})};export{P as default};
