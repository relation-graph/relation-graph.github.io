import{r as l,a as n,j as r}from"./index.7473cb17.js";import{u as S}from"./relation-graph.26f01d58.js";const _=()=>{const a=l.exports.useRef(null),[m,u]=l.exports.useState(!1),[h,x]=l.exports.useState({x:0,y:0}),[o,g]=l.exports.useState(null),[d,f]=l.exports.useState("");let w=1,v=1;const N={allowSwitchLineShape:!0,allowSwitchJunctionPoint:!0,allowShowDownloadButton:!0,defaultJunctionPoint:"border"},C=async()=>{const t={rootId:"a",nodes:[{id:"a",text:"A",borderColor:"yellow"},{id:"b",text:"B",color:"#43a2f1",fontColor:"yellow"},{id:"c",text:"C",nodeShape:1,width:50,height:50},{id:"e",text:"E",nodeShape:0,width:80,height:80}],lines:[{from:"a",to:"b",text:"Relation 1",color:"#43a2f1"},{from:"a",to:"c",text:"Relation 2"},{from:"a",to:"e",text:"Relation 3"},{from:"b",to:"e",text:"",color:"#67C23A"}]},e=a.current.getInstance();e&&(await e.setJsonData(t),await e.moveToCenter(),await e.zoomToFit())},I=(t,e,s)=>{const i=a.current.getInstance();g(e),f(s);const c=i.getBoundingClientRect();console.log("showNodeMenus:",t,c),u(!0),x({x:t.clientX-c.x+10,y:t.clientY-c.y+10});const p=()=>{u(!1),document.body.removeEventListener("click",p)};document.body.addEventListener("click",p)},y=t=>{const e=a.current.getInstance(),s=e.getBoundingClientRect(),i=e.getCanvasCoordinateByClientCoordinate({x:h.x-10+s.x,y:h.y-10+s.y}),c=w++;e.addNodes([{id:"addFromCanvas-"+c,text:"New-"+c,color:"#5da0f8",x:i.x,y:i.y}])},b=t=>{a.current.getInstance().removeNodeById(d.id)},k=t=>{a.current.getInstance().removeLinkById(d.seeks_id)},L=t=>{const e=a.current.getInstance();e.startCreatingLinePlot(t,{template:{lineWidth:3,color:"#e85f84",text:"New Link"},fromNode:d,onCreateLine:(s,i)=>{if(console.log("New Link:",s,i),i.id){const c=v++;e.addLines([{from:s.id,to:i.id,lineWidth:3,color:"#e85f84",text:"New Link "+c}])}}})};return l.exports.useEffect(()=>{C()},[]),n("div",{children:r("div",{style:{height:"100vh"},children:[n("div",{className:"w-96 rounded-lg absolute left-20 top-20 z-20 p-4 bg-white border-solid border-2 border-black shadow-lg",children:n("div",{className:"c-option-name",children:"Please try right-clicking on the artboard, node, or line"})}),m&&r("div",{style:{left:h.x+"px",top:h.y+"px"},className:"c-right-menu-panel",children:[r("div",{className:"c-object-info",children:[n("div",{children:"Current right-click event information:"}),r("div",{children:["Type: ",o]}),o==="link"&&r("div",{children:[d.fromNode.text," -> ",d.toNode.text]}),o==="node"&&r("div",{children:["ID: ",d.id]}),o==="node"&&r("div",{children:["Text: ",d.text]}),n("div",{children:"You can perform the following operations on this object:"})]}),o==="canvas"&&n("div",{className:"c-node-menu-item",onClick:y,children:"Add Node"}),o==="node"&&n("div",{className:"c-node-menu-item",onClick:b,children:"Delete Node"}),o==="node"&&n("div",{className:"c-node-menu-item",onClick:L,children:"Add Link"}),o==="link"&&n("div",{className:"c-node-menu-item",onClick:k,children:"Delete Relation"})]}),n(S,{ref:a,options:N,onContextmenu:I})]})})};export{_ as default};
