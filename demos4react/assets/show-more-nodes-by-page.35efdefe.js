import{r as u,a as r,j as g}from"./index.7473cb17.js";import{u as _}from"./relation-graph.26f01d58.js";const L=()=>{const n=u.exports.useRef(null),p={debug:!1,lineUseTextPath:!0,useAnimationWhenExpanded:!0,layout:{layoutName:"tree",from:"left",min_per_width:"400",max_per_width:"400",min_per_height:"40",max_per_height:"50",enableGatherNodes:!1,levelDistance:"200,360,360,360,360,360,360,360,360,360,300,300,300,300,300,300"},defaultNodeShape:1,defaultLineShape:4,defaultJunctionPoint:"lr",defaultNodeBorderWidth:0,defaultLineColor:"#dddddd",defaultNodeColor:"transparent"},x=u.exports.useRef(0),w=async()=>{var o;const t={rootId:"root",nodes:[{id:"root",text:"Tian Technology Co., Ltd.",offset_x:0,data:{type:"root"}}],lines:[]};c("root","left",t),c("root","right",t),console.log(JSON.stringify(t));const e=(o=n.current)==null?void 0:o.getInstance();await(e==null?void 0:e.setJsonData(t,!0)),await(e==null?void 0:e.playShowEffect()),await v()},v=async t=>{var a;const e=(a=n.current)==null?void 0:a.getInstance(),o=e==null?void 0:e.getNodes();let i=[],l=[];o==null||o.forEach(s=>{if(!s.lot||!s.lot.childs)return;let d=s.targetTo;d.length>2&&(d.slice(2).forEach(f=>{f.isHide=!0}),l.push({id:`${s.id}-to-more`,text:"Expand All T",alignItems:"left",data:{type:"btn-more-to"}}),i.push({from:s.id,to:`${s.id}-to-more`})),d=s.targetFrom,d.length>2&&(d.slice(2).forEach(f=>{f.isHide=!0}),l.push({id:`${s.id}-from-more`,text:"Expand All F",alignItems:"right",data:{type:"btn-more-from"}}),i.push({from:`${s.id}-from-more`,to:s.id}))}),e==null||e.addNodes(l),e==null||e.addLines(i),await(e==null?void 0:e.doLayout()),await(e==null?void 0:e.setZoom(80))},S=t=>{var o;console.log("showMoreNodes");const e=(o=n.current)==null?void 0:o.getInstance();if(t.data.type==="btn-more-to"){const i=t.lot.parent.targetTo;console.log("showMoreNodes:allSublingNodes",i.length),i.forEach(l=>{l.isHide=!1}),e==null||e.removeNodeById(t.id),e==null||e.doLayout()}if(t.data.type==="btn-more-from"){const i=t.lot.parent.targetFrom;console.log("showMoreNodes:allSublingNodes",i.length),i.forEach(l=>{l.isHide=!1}),e==null||e.removeNodeById(t.id),e==null||e.doLayout()}},c=(t,e,o,i=1)=>{const l=1+Math.floor(Math.random()*10);console.log("generateChildNodes for:",t,"size:",l);for(let a=0;a<l;a++){const s=x.current++,d="N"+s,m=`N${s} Beijing ${y[Math.floor(Math.random()*y.length)]} Company ${d}`,N={id:d,text:m,alignItems:e==="left"?"right":"left"};let h;e==="left"?h={from:d,to:t}:h={from:t,to:d},o.nodes.push(N),o.lines.push(h),i<3&&Math.random()>.5&&c(d,e,o,i+1)>0&&(N.expandHolderPosition=e)}return l},y=["","Tianxing","Xingyueye","Fengyunjihui","Jinkai Binshi"],M=({node:t})=>{var e,o,i,l;return r("div",{children:((e=t.data)==null?void 0:e.type)==="btn-more-from"||((o=t.data)==null?void 0:o.type)==="btn-more-to"?r("div",{className:"my-node more-btn",onClick:()=>S(t),children:t.text}):((i=t.data)==null?void 0:i.type)==="root"?r("div",{className:"my-node my-root",children:t.text}):((l=t.data)==null?void 0:l.type)==="level1"?r("div",{className:"my-node",style:{width:"100px",paddingLeft:"0px",textAlign:"center",backgroundColor:"#2c3e50",color:"#ffffff"},children:t.text}):g("div",{className:"my-node",children:[r("span",{className:"c-circle-flag"}),t.text]})})};return u.exports.useEffect(()=>{w()},[]),r("div",{children:g("div",{style:{height:"100vh"},children:[r("div",{slot:"graph-plug",children:r("div",{className:"c-my-panel",children:r("div",{className:"c-option-name",style:{lineHeight:"25px"},children:"The data used on this page is randomly generated. If you want to see other data, you can refresh the page."})})}),r(_,{ref:n,options:p,nodeSlot:M})]})})};export{L as default};
