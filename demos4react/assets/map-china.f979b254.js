import{r as c,a,j as d}from"./index.7473cb17.js";import{u as v}from"./relation-graph.26f01d58.js";import w from"./res-map-china.81320bc8.js";import{MyLinkButton as D}from"./RGComponentsForDemo.afa6e56e.js";const b=()=>{const s=c.exports.useRef(null),[i,l]=c.exports.useState([]),h={debug:!1,allowSwitchLineShape:!0,allowSwitchJunctionPoint:!0,allowShowDownloadButton:!0,defaultJunctionPoint:"border",placeOtherNodes:!1,placeSingleNode:!1,graphOffset_x:0,graphOffset_y:0,defaultNodeColor:"#f39930",defaultNodeBorderWidth:1,defaultNodeBorderColor:"#f39930",defaultNodeWidth:20,defaultNodeHeight:20,defaultLineColor:"#f39930",defaultLineWidth:2,layout:{layoutName:"fixed"}};c.exports.useEffect(()=>{p()},[]);const p=async()=>{const t={rootId:"R",nodes:[{id:"R",text:"R",opacity:1,x:570,y:250},{id:"A",text:"A",opacity:1,x:0,y:0},{id:"B",text:"B",opacity:1,x:0,y:0},{id:"C",text:"C",opacity:1,x:0,y:0},{id:"D",text:"D",opacity:1,x:0,y:0},{id:"image-from",text:"",opacity:0,x:-49,y:-20},{id:"image-to",text:"",opacity:0,x:1184,y:652}],lines:[{from:"R",to:"A",animation:1,lineShape:3},{from:"R",to:"B",animation:2},{from:"R",to:"C",animation:3},{from:"R",to:"D",animation:4,lineShape:1}]},o=t.nodes.find(e=>e.id===t.rootId),n=500;t.nodes.forEach(e=>{e.id!==o.id&&(e.x=o.x+Math.floor(Math.random()*n)-n/2,e.y=o.y+Math.floor(Math.random()*n)-n/2)});const r=s.current.getInstance();await r.setJsonData(t),await r.moveToCenter()},f=(t,o)=>{console.log("onNodeClick:",t.text,`x: ${t.x}, y: ${t.y}`)},m=(t,o,n)=>{console.log("onLineClick:",t)},u=()=>{const t=s.current.getInstance(),o=t.getNodes().map(e=>({id:e.id,text:e.text,x:e.x,y:e.y,opacity:e.opacity})),n=t.getLinks().reduce((e,x)=>{const{from:y,to:N,lineShape:S,animation:C}=x.relations[0];return e.concat([{from:y,to:N,lineShape:S,animation:C}])},[]),r={rootId:t.graphData.rootNode.id,nodes:o,lines:n};if(i.length>0&&JSON.stringify(r)===JSON.stringify(i[i.length-1].data)){alert("The data has not changed");return}l([{name:new Date().toLocaleTimeString(),data:r}].concat(i))},g=t=>{s.current.getInstance().setJsonData(t.data)};return a("div",{children:d("div",{style:{height:"100vh"},children:[d("div",{className:"c-my-panel rounded-lg absolute left-20 top-20 z-20 p-4 bg-white border-solid border-2 border-black shadow-lg",children:[a("div",{style:{padding:"10px"},children:a(D,{onClick:u,children:"Save the content of the current graph"})}),d("div",{className:"c-snapshots",children:[a("div",{className:"c-option-name",children:"Saved snapshots:"}),i.map(t=>a("div",{className:"c-snapshot-item",onClick:()=>g(t),children:t.name},t.name))]})]}),a(v,{ref:s,options:h,onNodeClick:f,onLineClick:m,children:a("div",{children:a(w,{})})})]})})};export{b as default};
