import{M as _}from"./relation-graph-588d2e75.js";import{s as x}from"./CircumIcons-1fd649a8.js";import{d as g,r as N,o as T,a as r,c as l,b as k,e as f,w as C,u as y,t as w}from"./index-e4516832.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const v={ref:"myPage",class:"my-graph",style:{height:"calc(100vh)"}},E={key:0,class:"my-add-button"},M={key:1,class:"my-node"},B=g({__name:"relayout-after-add-nodes",setup(I){const b={allowSwitchLineShape:!0,allowSwitchJunctionPoint:!0,defaultNodeColor:"transparent",defaultNodeBorderWidth:0,defaultNodeBorderColor:"transpanret",defaultLineColor:"rgba(128, 128, 255)",defaultNodeShape:1,toolBarDirection:"h",toolBarPositionH:"right",toolBarPositionV:"bottom",defaultPolyLineRadius:10,defaultLineShape:4,defaultLineWidth:2,defaultJunctionPoint:"lr",defaultLineTextOffset_y:-4,layout:{layoutName:"tree",from:"left",min_per_width:210,max_per_width:210,min_per_height:80,max_per_height:80}},c={rootId:"a",nodes:[{id:"a",text:"a",children:[{id:"b",text:"b",children:[{id:"b1",text:"b1",children:[{id:"b1-add-button",text:"add node",disableDefaultClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"b2",text:"b2",children:[{id:"b2-1",text:"b2-1",children:[{id:"b2-1-add-button",text:"add node",disableDefaultClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"b2-2",text:"b2-2",children:[{id:"b2-2-add-button",text:"add node",disableDefaultClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"b2-add-button",text:"add node",data:{myType:"my-add-button"}}]},{id:"b-add-button",text:"add node",disableDefaultClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"c",text:"c",children:[{id:"c1",text:"c1",children:[{id:"c1-add-button",text:"add node",data:{myType:"my-add-button"}}]},{id:"c2",text:"c2",children:[{id:"c2-add-button",text:"add node",disableDefaultClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"c3",text:"c3",children:[{id:"c3-add-button",text:"add node",disableDefaultClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"c-add-button",text:"add node",disableDefaultClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"a-add-button",text:"add node",disableDefaultClickEffect:!0,data:{myType:"my-add-button"}}]}],lines:[]},s=N(null),p=async()=>{await u()},u=async()=>{await s.value.getInstance().setJsonData(c)},n=(e,a)=>{if(a)for(const t of a){if(t.id===e)return t;if(console.log(t.id,e),!t.children)continue;const d=n(e,t.children);if(d)return d}else return n(e,c.nodes)},m=async e=>{const a=e.lot.parent;console.log(" find ",a.id);const t=n(a.id),d=Math.ceil(Math.random()*3);for(let o=0;o<d;o++){console.log(o," of ",d);const i="N-"+Math.ceil(Math.random()*9999);t.children.push({id:i,text:i,children:[{id:i+"-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]})}t.children.sort((o,h)=>o.data&&o.data.myType==="my-add-button"?1:-1),console.log(d,t.children),await u()};return T(()=>{p()}),(e,a)=>(r(),l("div",null,[k("div",v,[f(y(_),{ref_key:"graphRef",ref:s,options:b},{node:C(({node:t})=>[t.data&&t.data.myType==="my-add-button"?(r(),l("div",E,[f(y(x),{size:"20px",name:"circle_plus",style:{cursor:"pointer"},onClick:d=>m(t)},null,8,["onClick"])])):(r(),l("div",M,w(t.text),1))]),_:1},512)],512)]))}});const R=D(B,[["__scopeId","data-v-bbb52820"]]);export{R as default};
