import{M}from"./relation-graph-9d2491ce.js";import{d as $,r as _,o as b,a as d,c as r,l as B,e as L,w as T,u as z,m as E,t as p,f as H,p as D,j as F,b as G}from"./index-f19b6715.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";const J=c=>(D("data-v-79f89fcf"),c=c(),F(),c),P={"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.6)",style:{height:"calc(100vh - 60px)"}},R=["onClick"],W={key:1,class:"my-node my-root"},A={key:2,class:"my-node",style:{width:"100px","padding-left":"0px","text-align":"center","background-color":"#2c3e50",color:"#ffffff"}},K={key:3,class:"my-node"},U=J(()=>G("span",{class:"c-circle-flag"},null,-1)),Z=$({__name:"show-more-nodes-front",setup(c){const y={debug:!1,lineUseTextPath:!0,useAnimationWhenExpanded:!0,layouts:[{layoutName:"tree",from:"left",min_per_width:"400",max_per_width:"400",min_per_height:"40",max_per_height:"50",enableGatherNodes:!1,levelDistance:"200,300,200,300,200,300,200,300,200,300,200,300,200,300,200,300"}],defaultNodeShape:1,defaultLineShape:4,defaultJunctionPoint:"lr",defaultNodeBorderWidth:0,defaultLineColor:"#dddddd",defaultNodeColor:"transparent"},f=_(null),x=_(!1),N=async()=>{const e={rootId:"root",nodes:[{id:"root",text:"Tian Technology Co., Ltd.",offset_x:0,data:{type:"root"}},{id:"gudong",text:"Shareholders",offset_x:-80,data:{type:"level1"}},{id:"gaoguan",text:"Executives",offset_x:-80,data:{type:"level1"}},{id:"duiwaitouzi",text:"External Investment",offset_x:80,data:{type:"level1"}},{id:"fenzhijigou",text:"Branches",offset_x:80,data:{type:"level1"}}],lines:[{from:"gudong",to:"root",lineShape:3},{from:"gaoguan",to:"root",lineShape:3},{from:"root",to:"duiwaitouzi",lineShape:3},{from:"root",to:"fenzhijigou",lineShape:3}]},o=f.value.getInstance();h("gudong","left",e),h("gaoguan","left",e),h("fenzhijigou","right",e),h("duiwaitouzi","right",e),await o.setJsonData(e,!0),await o.playShowEffect(),await w()},v=(e,o)=>{console.log("onNodeClick:",e)},w=async()=>{const e=f.value.getInstance(),o=e.getNodes();let a=[],t=[];const s=3;o.forEach(n=>{if(!n.lot||!n.lot.childs)return;let i=n.targetTo;i.length>s&&(i.slice(2).forEach(g=>{g.isHide=!0}),t.push({id:`${n.id}-to-more`,text:`Show More T(${i.length-s})`,alignItems:"left",data:{type:"btn-more-to"}}),a.push({from:n.id,to:`${n.id}-to-more`})),i=n.targetFrom,i.length>2&&(i.slice(2).forEach(g=>{g.isHide=!0}),t.push({id:`${n.id}-from-more`,text:`Show More F(${i.length-s})`,alignItems:"right",data:{type:"btn-more-from"}}),a.push({from:`${n.id}-from-more`,to:n.id}))}),e.addNodes(t),e.addLines(a),await e.doLayout(),await e.setZoom(80)},S=e=>{const o=f.value.getInstance();if(e.data.type==="btn-more-to"){const a=e.lot.parent.targetTo,t=3;let s=0,n=0;for(const l of a)if(l.isHide===!0&&(l.isHide=!1,n++),l.isHide!==!0&&s++,n>=t)break;s>=a.length&&o.removeNodeById(e.id);const i=o.getNodeById(e.id);i.text=`Show More (${a.length-s-1})`,o.doLayout()}if(e.data.type==="btn-more-from"){const a=e.lot.parent.targetFrom,t=3;let s=0,n=0;for(const l of a)if(l.isHide===!0&&(l.isHide=!1,n++),l.isHide!==!0&&s++,n>=t)break;const i=o.getNodeById(e.id);i.text=`Show More (${a.length-s-1})`,s>=a.length&&o.removeNodeById(e.id),o.doLayout()}},I=(e,o,a)=>{console.log("onLineClick:",e)},h=(e,o,a)=>{const t=1+Math.floor(Math.random()*30);for(let s=0;s<t;s++){const i="N"+k++,l=`Beijing ${m[Math.floor(Math.random()*m.length)]} No.${i} Company`,C={id:i,text:l,expanded:!1,alignItems:o==="left"?"right":"left"};let u;o==="left"?u={from:i,to:e}:u={from:e,to:i},a.nodes.push(C),a.lines.push(u)}};b(()=>{N()});let k=1;const m=["","Tianxing","Starry Night","Gathering Storm","Jin Kaibinski"];return(e,o)=>{const a=E("loading");return d(),r("div",null,[B((d(),r("div",P,[L(z(M),{ref_key:"graphRef",ref:f,options:y,"on-node-click":v,"on-line-click":I},{node:T(({node:t})=>[t.data.type==="btn-more-from"||t.data.type==="btn-more-to"?(d(),r("div",{key:0,class:"my-node more-btn",onClick:s=>S(t)},p(t.text),9,R)):t.data.type==="root"?(d(),r("div",W,p(t.text),1)):t.data.type==="level1"?(d(),r("div",A,p(t.text),1)):(d(),r("div",K,[U,H(p(t.text),1)]))]),_:1},512)])),[[a,x.value]])])}}});const X=V(Z,[["__scopeId","data-v-79f89fcf"]]);export{X as default};
