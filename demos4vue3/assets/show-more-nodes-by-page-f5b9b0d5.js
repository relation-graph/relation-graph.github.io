import{M as E}from"./relation-graph-9d2491ce.js";import{d as L,r as _,o as B,a as d,c as r,l as $,e as H,w as x,u as z,m as D,t as f,f as F,p as P,j as A,b as u}from"./index-f19b6715.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";const v=h=>(P("data-v-73a75d22"),h=h(),A(),h),G={"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.6)",style:{height:"calc(100vh - 60px)"}},J=["onClick"],R={key:1,class:"my-node my-root"},W={key:2,class:"my-node",style:{width:"100px","padding-left":"0px","text-align":"center","background-color":"#2c3e50",color:"#ffffff"}},U={key:3,class:"my-node"},X=v(()=>u("span",{class:"c-circle-flag"},null,-1)),Z=v(()=>u("div",{class:"c-my-panel"},[u("div",{class:"c-option-name",style:{"line-height":"25px"}},"The data used on this page is randomly generated. If you want to see other data, you can refresh the page.")],-1)),j=L({__name:"show-more-nodes-by-page",setup(h){const w={debug:!1,lineUseTextPath:!0,useAnimationWhenExpanded:!0,layout:{layoutName:"tree",from:"left",min_per_width:"400",max_per_width:"400",min_per_height:"40",max_per_height:"50",enableGatherNodes:!1,levelDistance:"200,360,360,360,360,360,360,360,360,360,300,300,300,300,300,300"},defaultNodeShape:1,defaultLineShape:4,defaultJunctionPoint:"lr",defaultNodeBorderWidth:0,defaultLineColor:"#dddddd",defaultNodeColor:"transparent"},k=_(!1),I=_(0),g=_(),C=async()=>{const e={rootId:"root",nodes:[{id:"root",text:"Tian Technology Co., Ltd.",offset_x:0,data:{type:"root"}}],lines:[]};p("root","left",e),p("root","right",e),console.log(JSON.stringify(e));const o=g.value.getInstance();await o.setJsonData(e,!0),await o.playShowEffect(),await S()},M=(e,o)=>{console.log("onNodeClick:",e)},S=async e=>{const o=g.value.getInstance(),a=o.getNodes();let t=[],n=[];a.forEach(s=>{if(!s.lot||!s.lot.childs)return;let i=s.targetTo;i.length>2&&(i.slice(2).forEach(c=>{c.isHide=!0}),n.push({id:`${s.id}-to-more`,text:"Expand All T",alignItems:"left",data:{type:"btn-more-to"}}),t.push({from:s.id,to:`${s.id}-to-more`})),i=s.targetFrom,i.length>2&&(i.slice(2).forEach(c=>{c.isHide=!0}),n.push({id:`${s.id}-from-more`,text:"Expand All F",alignItems:"right",data:{type:"btn-more-from"}}),t.push({from:`${s.id}-from-more`,to:s.id}))}),o.addNodes(n),o.addLines(t),await o.doLayout(),await o.setZoom(80)},b=e=>{console.log("showMoreNodes");const o=g.value.getInstance();if(e.data.type==="btn-more-to"){const a=e.lot.parent.targetTo;console.log("showMoreNodes:allSublingNodes",a.length),a.forEach(t=>{t.isHide=!1}),o.removeNodeById(e.id),o.doLayout()}if(e.data.type==="btn-more-from"){const a=e.lot.parent.targetFrom;console.log("showMoreNodes:allSublingNodes",a.length),a.forEach(t=>{t.isHide=!1}),o.removeNodeById(e.id),o.doLayout()}},T=(e,o,a)=>{console.log("onLineClick:",e)},p=(e,o,a,t=1)=>{const n=1+Math.floor(Math.random()*10);console.log("generateChildNodes for:",e,"size:",n);for(let s=0;s<n;s++){const i=I.value++,l="N"+i,c=`N${i} Beijing ${y[Math.floor(Math.random()*y.length)]} Company ${l}`,N={id:l,text:c,alignItems:o==="left"?"right":"left"};let m;o==="left"?m={from:l,to:e}:m={from:e,to:l},a.nodes.push(N),a.lines.push(m),t<3&&Math.random()>.5&&p(l,o,a,t+1)>0&&(N.expandHolderPosition=o)}return n};B(()=>{C()});const y=["","Tianxing","Xingyueye","Fengyunjihui","Jinkai Binshi"];return(e,o)=>{const a=D("loading");return d(),r("div",null,[$((d(),r("div",G,[H(z(E),{ref_key:"graphRef",ref:g,options:w,"on-node-click":M,"on-line-click":T},{node:x(({node:t})=>[t.data.type==="btn-more-from"||t.data.type==="btn-more-to"?(d(),r("div",{key:0,class:"my-node more-btn",onClick:n=>b(t)},f(t.text),9,J)):t.data.type==="root"?(d(),r("div",R,f(t.text),1)):t.data.type==="level1"?(d(),r("div",W,f(t.text),1)):(d(),r("div",U,[X,F(f(t.text),1)]))]),"graph-plug":x(()=>[Z]),_:1},512)])),[[a,k.value]])])}}});const ee=V(j,[["__scopeId","data-v-73a75d22"]]);export{ee as default};
