import{N as _,k as B,E as j,M as G}from"./relation-graph-588d2e75.js";import{d as X,r as w,o as Y,a as F,c as q,b as C,f as i,e as s,w as m,t as E,u as D,i as W}from"./index-e4516832.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const{JUNCTION_POINT_STYLE:P}=j;console.log("JUNCTION_POINT_STYLE:",_);class Q extends B{constructor(...n){super(...n)}createLinePath(n,l,a){let o=n.fromNode;o||(o={x:0,y:0,el:{offsetWidth:10,offsetHeight:10}});const t=n.toNode;a||(a=0);const h=l.lineDirection||this.options.layoutDirection||"h";console.log("createLinePath",h);const x=o.x,L=o.y,N=t.x,u=t.y,e={x:0,y:0,rotate:0};if(Number.isNaN(x)||Number.isNaN(L))return console.log("error start node:",o.text,o.x,o.y),e.x=50,e.y=50,e.rotate=0,this.createReturnValue("M 0 0 L 100 100",e);if(Number.isNaN(N)||Number.isNaN(u))return console.log("error end point:",t.text,t.x,t.y),e.x=50,e.y=50,e.rotate=0,this.createReturnValue("M 0 0 L 100 100",e);const r=o.el.offsetWidth||o.width||60,b=o.el.offsetHeight||o.height||60;if(Number.isNaN(r)||Number.isNaN(b))return console.log("error end point22:",t.text,t.x,t.y),e.x=50,e.y=50,e.rotate=0,this.createReturnValue("M 0 0 L 100 100",e);const y=t.el.offsetWidth||t.width||60,f=t.el.offsetHeight||t.height||60;if(Number.isNaN(y)||Number.isNaN(f))return console.log("error end point33:",t.text,t.x,t.y),e.x=50,e.y=50,e.rotate=0,this.createReturnValue("M 0 0 L 100 100",e);const S=[x,L,N,u,r,b,y,f,this.options.defaultNodeShape,!1,n.relations.length,a],M=[N,u,x,L,y,f,r,b,this.options.defaultNodeShape,!0,n.relations.length,a];let d,c,g=o.junctionPoint||this.options.defaultJunctionPoint;if(g||(g=P.border),g===P.border)d=_.getBorderPoint4MultiLine(...S),c=_.getBorderPoint4MultiLine(...M);else if(g===P.ltrb)d=_.getRectJoinPoint(...S),c=_.getRectJoinPoint(...M);else if(g===P.tb)d=_.getRectVJoinPoint(...S),c=_.getRectVJoinPoint(...M);else if(g===P.lr)d=_.getRectHJoinPoint(...S),c=_.getRectHJoinPoint(...M);else return this.createReturnValue("Unknown join point type:"+g,e);if(!d||!c)return this.createReturnValue("Can not create start and end!",e);const v=d.x,T=d.y,V=c.x,R=c.y;if(Number.isNaN(v)||Number.isNaN(T))return console.error("error start point:",o),e.x=50,e.y=50,e.rotate=0,this.createReturnValue("M 0 0 L 100 100",e);if(Number.isNaN(V)||Number.isNaN(R))return console.error("error end point:",t),e.x=50,e.y=50,e.rotate=0,this.createReturnValue("M 0 0 L 100 100",e);c.x-d.x,c.y-d.y;let O=c.x>d.x?1:-1;h==="v"&&(O=c.y>d.y?1:-1);let J="";const U=Math.floor(60/(n.relations.length+1)*(a+1))-30,k=this.options.defaultPloyLineRadius||0;if(h==="v"){const p=O*33+U-k;J=`M ${v} ${T} v${p} L${V} ${R-p} v${p}`;const $=v,I=T+p,A=V,H=R-p;this.calcTextPosition($,I,A,H,e)}else{const p=O*33+U-k;J=`M ${v} ${T} h${p} L ${V-p} ${R} h${p}`;const $=v+p,I=T,A=V-p,H=R;this.calcTextPosition($,I,A,H,e)}return this.createReturnValue(J,e)}calcTextPosition(n,l,a,o,t){const h=a-n,x=o-l;t.rotate=_.getTextAngle(n,l,a,o),t.x=Math.round(n+h/2),t.y=Math.round(l+x/2),Number.isNaN(t.rotate)&&(t.rotate=0)}getTextTransform(n,l,a,o){if(Number.isNaN(l)||Number.isNaN(a))return"translate(0,0)";const t=n.lineShape===void 0?this.options.defaultLineShape:n.lineShape;return t===1||t===4?`translate(${l},${a})rotate(${o||0})`:`translate(${l},${a})`}}const Z={style:{height:"calc(100vh)",position:"relative","font-size":"12px","line-height":"30px"}},ee={style:{width:"400px","padding-left":"20px","padding-top":"5px",position:"absolute",left:"20px",top:"20px","z-index":"20",padding:"20px","background-color":"#ffffff",border:"#efefef solid 1px","box-shadow":"0 3px 9px rgba(0,21,41,.08)"}},te=X({__name:"customer-line1",setup(z){const n={debug:!1,backgrounImageNoRepeat:!0,moveToCenterWhenRefresh:!0,zoomToFitWhenRefresh:!0,useAnimationWhenRefresh:!1,defaultNodeWidth:150,defaultNodeHeight:30,defaultLineWidth:2,defaultLineShape:4,defaultLineTextOffset_x:-21,defaultLineTextOffset_y:-4,lineUseTextPath:!1,defaultLineMarker:{markerWidth:5,markerHeight:5,refX:5,refY:3,data:"M 0 3 A 3 3 0 0 1 6 3 A 3 3 0 0 1 0 3"},layouts:[{label:"Center",layoutName:"tree",from:"left",layoutClassName:"seeks-layout-center"}]},l=Q,a=w(-21),o=w(-4),t=w(n),h=w(),x=async()=>{const u={rootId:"2",nodes:[{id:"2",text:"ALTXX"},{id:"3",text:"CH2 TTN"},{id:"4",text:"CH1 AlCu"},{id:"5",text:"MainFrame"},{id:"14",text:"ArHigh"},{id:"15",text:"ArLow"},{id:"20",text:"N2"},{id:"22",text:"Cool Chbr"},{id:"24",text:"Alignment Unit"}],lines:[{from:"2",to:"5",text:"Subsystem",showEndArrow:!1},{from:"2",to:"3",text:"Subsystem",showEndArrow:!1},{from:"2",to:"4",text:"Subsystem",showEndArrow:!1},{from:"3",to:"20",text:"Subsystem"},{from:"4",to:"15",text:"Subsystem"},{from:"4",to:"14",text:"Subsystem"},{from:"5",to:"24",text:"Subsystem"},{from:"5",to:"22",text:"Subsystem"}]};await h.value.getInstance().setJsonData(u)},L=()=>{const u=h.value.getInstance();u.options.defaultJunctionPoint=t.value.defaultJunctionPoint},N=async()=>{t.value.defaultLineTextOffset_x=a.value,t.value.defaultLineTextOffset_y=o.value;const u=h.value.getInstance();await u.setOptions(JSON.parse(JSON.stringify(t.value))),await u.doLayout()};return Y(()=>{x()}),(u,e)=>{const r=W("el-radio-button"),b=W("el-radio-group"),y=W("el-slider");return F(),q("div",null,[C("div",Z,[C("div",ee,[i(" Layout Direction: "),C("div",null,[s(b,{modelValue:n.layouts[0].from,"onUpdate:modelValue":e[0]||(e[0]=f=>n.layouts[0].from=f),size:"small",onChange:N},{default:m(()=>[s(r,{label:"left"},{default:m(()=>[i("left")]),_:1}),s(r,{label:"right"},{default:m(()=>[i("right")]),_:1}),s(r,{label:"top"},{default:m(()=>[i("top")]),_:1}),s(r,{label:"bottom"},{default:m(()=>[i("bottom")]),_:1})]),_:1},8,["modelValue"])]),i(" Default Line Junction Point: "),C("div",null,[s(b,{modelValue:n.defaultJunctionPoint,"onUpdate:modelValue":e[1]||(e[1]=f=>n.defaultJunctionPoint=f),size:"small",onChange:L},{default:m(()=>[s(r,{label:"border"},{default:m(()=>[i("border")]),_:1}),s(r,{label:"tb"},{default:m(()=>[i("top-bottom")]),_:1}),s(r,{label:"lr"},{default:m(()=>[i("left-right")]),_:1}),s(r,{label:"ltrb"},{default:m(()=>[i("left-top-right-bottom")]),_:1})]),_:1},8,["modelValue"])]),i(" Line Text Offset X: "+E(a.value)+" ",1),s(y,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=f=>a.value=f),min:-250,max:250,"show-tooltip":!0,onChange:N},null,8,["modelValue"]),i(" Line Text Offset Y: "+E(o.value)+" ",1),s(y,{modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=f=>o.value=f),min:-50,max:50,onChange:N},null,8,["modelValue"])]),s(D(G),{ref_key:"graphRef",ref:h,"relation-graph-core":D(l),options:n},null,8,["relation-graph-core"])])])}}});const se=K(te,[["__scopeId","data-v-4d9bfa39"]]);export{se as default};
