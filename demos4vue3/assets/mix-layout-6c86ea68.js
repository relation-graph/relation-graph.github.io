import{M as N,k as p}from"./relation-graph-bae0ebdb.js";import{d as R,r as s,o as _,x as L,a as m,c as n,b as w,e as v,w as O,u as k,t as f,q as C}from"./index-bbffd316.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";const S={style:{height:"calc(100vh - 60px)"}},B={key:0,class:"",style:{"background-color":"#df7f03"}},D={key:1,class:"c-left-node c-valign-center"},M={key:2,class:"c-right-node c-valign-center"},P={key:3,class:"c-top-node c-valign-center"},j={key:4,class:"c-bottom-node c-valign-center"},T=R({__name:"mix-layout",setup(J){const y={debug:!1,layouts:[{layoutName:"fixed"}],defaultPloyLineRadius:10,defaultNodeShape:1,defaultLineShape:3,defaultJunctionPoint:"ltrb",defaultNodeBorderWidth:0,defaultLineColor:"rgba(0, 186, 189, 1)",defaultNodeColor:"rgba(0, 206, 209, 1)"},i=s(null),u=s(),l=async()=>{const o={rootId:"my-root",nodes:[{id:"my-root",text:"根节点",x:0,y:0,nodeShape:1,width:200,height:100,junctionPoint:"ltrb"},{id:"r",text:"R",data:{myGroupId:"left"}},{id:"R-b",text:"R-b",data:{myGroupId:"left"}},{id:"R-b-1",text:"R-b-1",data:{myGroupId:"left"}},{id:"R-b-2",text:"R-b-2",data:{myGroupId:"left"}},{id:"R-b-3",text:"R-b-3",data:{myGroupId:"left"}},{id:"R-c",text:"R-c",data:{myGroupId:"left"}},{id:"R-c-1",text:"R-c-1",data:{myGroupId:"left"}},{id:"R-c-2",text:"R-c-2",data:{myGroupId:"left"}},{id:"R-d",text:"R-d",data:{myGroupId:"left"}},{id:"R-d-1",text:"R-d-1",data:{myGroupId:"left"}},{id:"R-d-2",text:"R-d-2",data:{myGroupId:"left"}},{id:"R-d-3",text:"R-d-3",data:{myGroupId:"left"}},{id:"a",text:"a",data:{myGroupId:"right"}},{id:"c",text:"c",data:{myGroupId:"right"}},{id:"c1",text:"c1",data:{myGroupId:"right"}},{id:"c1-1",text:"c1-1",data:{myGroupId:"right"}},{id:"c1-2",text:"c1-2",data:{myGroupId:"right"}},{id:"c1-3",text:"c1-3",data:{myGroupId:"right"}},{id:"c1-4",text:"c1-4",data:{myGroupId:"right"}},{id:"c1-5",text:"c1-5",data:{myGroupId:"right"}},{id:"c1-6",text:"c1-6",data:{myGroupId:"right"}},{id:"c1-7",text:"c1-7",data:{myGroupId:"right"}},{id:"c2",text:"c2",data:{myGroupId:"right"}},{id:"c2-1",text:"c2-1",data:{myGroupId:"right"}},{id:"c2-2",text:"c2-2",data:{myGroupId:"right"}},{id:"c3",text:"c3",data:{myGroupId:"right"}},{id:"c3-1",text:"c3-1",data:{myGroupId:"right"}},{id:"c3-2",text:"c3-2",data:{myGroupId:"right"}},{id:"c3-3",text:"c3-3",data:{myGroupId:"right"}},{id:"t",text:"t",data:{myGroupId:"top"}},{id:"t1",text:"t1",data:{myGroupId:"top"}},{id:"t1-1",text:"t1-1",data:{myGroupId:"top"}},{id:"t1-2",text:"t1-2",data:{myGroupId:"top"}},{id:"t1-3",text:"t1-3",data:{myGroupId:"top"}},{id:"t1-4",text:"t1-4",data:{myGroupId:"top"}},{id:"t1-5",text:"t1-5",data:{myGroupId:"top"}},{id:"t1-6",text:"t1-6",data:{myGroupId:"top"}},{id:"t2",text:"t2",data:{myGroupId:"top"}},{id:"t2-1",text:"t2-1",data:{myGroupId:"top"}},{id:"t2-2",text:"t2-2",data:{myGroupId:"top"}},{id:"t2-3",text:"t2-3",data:{myGroupId:"top"}},{id:"t2-4",text:"t2-4",data:{myGroupId:"top"}},{id:"t2-5",text:"t2-5",data:{myGroupId:"top"}},{id:"t2-6",text:"t2-6",data:{myGroupId:"top"}},{id:"t2-7",text:"t2-7",data:{myGroupId:"top"}},{id:"t2-8",text:"t2-8",data:{myGroupId:"top"}},{id:"t2-9",text:"t2-9",data:{myGroupId:"top"}},{id:"e",text:"e",data:{myGroupId:"bottom"}},{id:"e1",text:"e1",data:{myGroupId:"bottom"}},{id:"e1-1",text:"e1-1",data:{myGroupId:"bottom"}},{id:"e1-2",text:"e1-2",data:{myGroupId:"bottom"}},{id:"e1-3",text:"e1-3",data:{myGroupId:"bottom"}},{id:"e1-4",text:"e1-4",data:{myGroupId:"bottom"}},{id:"e1-5",text:"e1-5",data:{myGroupId:"bottom"}},{id:"e1-6",text:"e1-6",data:{myGroupId:"bottom"}},{id:"e2",text:"e2",data:{myGroupId:"bottom"}},{id:"e2-1",text:"e2-1",data:{myGroupId:"bottom"}},{id:"e2-2",text:"e2-2",data:{myGroupId:"bottom"}},{id:"e2-3",text:"e2-3",data:{myGroupId:"bottom"}},{id:"e2-4",text:"e2-4",data:{myGroupId:"bottom"}},{id:"e2-5",text:"e2-5",data:{myGroupId:"bottom"}},{id:"e2-6",text:"e2-6",data:{myGroupId:"bottom"}},{id:"e2-7",text:"e2-7",data:{myGroupId:"bottom"}},{id:"e2-8",text:"e2-8",data:{myGroupId:"bottom"}},{id:"e2-9",text:"e2-9",data:{myGroupId:"bottom"}},{id:"br-root",text:"BR-Root",data:{myGroupId:"bottom-right"}},{id:"br-c",text:"br-c",data:{myGroupId:"bottom-right"}},{id:"br-c1",text:"br-c1",data:{myGroupId:"bottom-right"}},{id:"br-c1-1",text:"c1-1",data:{myGroupId:"bottom-right"}},{id:"br-c1-2",text:"c1-2",data:{myGroupId:"bottom-right"}},{id:"br-c1-3",text:"br-c1-3",data:{myGroupId:"bottom-right"}},{id:"br-c1-4",text:"c1-4",data:{myGroupId:"bottom-right"}},{id:"br-c1-5",text:"c1-5",data:{myGroupId:"bottom-right"}},{id:"br-c1-6",text:"br-c1-6",data:{myGroupId:"bottom-right"}},{id:"br-c1-7",text:"c1-7",data:{myGroupId:"bottom-right"}},{id:"br-c2",text:"c2",data:{myGroupId:"bottom-right"}},{id:"br-c2-1",text:"br-c2-1",data:{myGroupId:"bottom-right"}},{id:"br-c2-2",text:"c2-2",data:{myGroupId:"bottom-right"}},{id:"br-c3",text:"c3",data:{myGroupId:"bottom-right"}},{id:"br-c3-1",text:"br-c3-1",data:{myGroupId:"bottom-right"}},{id:"br-c3-2",text:"c3-2",data:{myGroupId:"bottom-right"}},{id:"br-c3-3",text:"c3-3",data:{myGroupId:"bottom-right"}}],lines:[{from:"my-root",to:"r",forDisplayOnly:!0},{to:"R-b",from:"r"},{to:"R-b-1",from:"R-b"},{to:"R-b-2",from:"R-b"},{to:"R-b-3",from:"R-b"},{to:"R-c",from:"r"},{to:"R-c-1",from:"R-c"},{to:"R-c-2",from:"R-c"},{to:"R-d",from:"r"},{to:"R-d-1",from:"R-d"},{to:"R-d-2",from:"R-d"},{to:"R-d-3",from:"R-d"},{from:"my-root",to:"a",lineShape:4,forDisplayOnly:!0},{from:"a",to:"c"},{from:"c",to:"c1"},{from:"c1",to:"c1-1"},{from:"c1",to:"c1-2"},{from:"c1",to:"c1-3"},{from:"c1",to:"c1-4"},{from:"c1",to:"c1-5"},{from:"c1",to:"c1-6"},{from:"c1",to:"c1-7"},{from:"c",to:"c2"},{from:"c2",to:"c2-1"},{from:"c2",to:"c2-2"},{from:"c",to:"c3"},{from:"c3",to:"c3-1"},{from:"c3",to:"c3-2"},{from:"c3",to:"c3-3"},{from:"my-root",to:"t",forDisplayOnly:!0},{from:"t",to:"t1"},{from:"t1",to:"t1-1"},{from:"t1",to:"t1-2"},{from:"t1",to:"t1-3"},{from:"t1",to:"t1-4"},{from:"t1",to:"t1-5"},{from:"t1",to:"t1-6"},{from:"t",to:"t2"},{from:"t2",to:"t2-1"},{from:"t2",to:"t2-2"},{from:"t2",to:"t2-3"},{from:"t2",to:"t2-4"},{from:"t2",to:"t2-5"},{from:"t2",to:"t2-6"},{from:"t2",to:"t2-7"},{from:"t2",to:"t2-8"},{from:"t2",to:"t2-9"},{from:"my-root",to:"e",forDisplayOnly:!0},{from:"e",to:"e1"},{from:"e1",to:"e1-1"},{from:"e1",to:"e1-2"},{from:"e1",to:"e1-3"},{from:"e1",to:"e1-4"},{from:"e1",to:"e1-5"},{from:"e1",to:"e1-6"},{from:"e",to:"e2"},{from:"e2",to:"e2-1"},{from:"e2",to:"e2-2"},{from:"e2",to:"e2-3"},{from:"e2",to:"e2-4"},{from:"e2",to:"e2-5"},{from:"e2",to:"e2-6"},{from:"e2",to:"e2-7"},{from:"e2",to:"e2-8"},{from:"e2",to:"e2-9"},{from:"my-root",to:"br-root",lineShape:6,fromJunctionPoint:"right",toJunctionPoint:"top",forDisplayOnly:!0},{from:"br-root",to:"br-c"},{from:"br-root",to:"br-c1"},{from:"br-c1",to:"br-c1-1"},{from:"br-c1",to:"br-c1-2"},{from:"br-c1",to:"br-c1-3"},{from:"br-c1",to:"br-c1-4"},{from:"br-c1",to:"br-c1-5"},{from:"br-c1",to:"br-c1-6"},{from:"br-c1",to:"br-c1-7"},{from:"br-c",to:"br-c2"},{from:"br-c2",to:"br-c2-1"},{from:"br-c2",to:"br-c2-2"},{from:"br-c",to:"br-c3"},{from:"br-c3",to:"br-c3-1"},{from:"br-c3",to:"br-c3-2"},{from:"br-c3",to:"br-c3-3"}]},e=i.value.getInstance();e.loading("Wait..."),await e.setJsonData(o),await e.sleep(500),await x(),await b(),await h(),await g(),await G(),await e.moveToCenter(),await e.zoomToFit(),e.clearLoading()},x=async()=>{const o=i.value.getInstance(),e=o.getNodes().filter(t=>t.data&&t.data.myGroupId==="left");o.getLinks().forEach(t=>{e.indexOf(t.fromNode)!==-1&&e.indexOf(t.toNode)!==-1&&t.relations.forEach(c=>{c.lineShape=4,c.color="#df7f03"})});const a=o.graphData.rootNode,d=o.getNodeById("r");d.y=a.y+(a.el.offsetHeight-d.el.offsetHeight)/2,d.x=a.x-300;const r=p.createLayout({layoutName:"tree",from:"right"},o.options,o);r.isMainLayouer=!1,r.layoutOptions.fixedRootNode=!0,await r.placeNodes(e,d)},b=async()=>{const o=i.value.getInstance(),e=o.getNodes().filter(t=>t.data&&t.data.myGroupId==="right"),a=o.graphData.rootNode,d=o.getNodeById("a");d.y=a.y-200,d.x=a.x+500;const r=p.createLayout({layoutName:"tree",from:"left",max_per_height:50},o.options,o);r.isMainLayouer=!1,r.layoutOptions.fixedRootNode=!0,await r.placeNodes(e,d),e.forEach(t=>{t.lot&&t.lot.childs.length>0&&(t.expandHolderPosition="right")})},h=async()=>{const o=i.value.getInstance(),e=o.getNodes().filter(t=>t.data&&t.data.myGroupId==="top");e.forEach(t=>{t.junctionPoint="border",t.width=80,t.height=80,t.nodeShape=0}),o.getLinks().forEach(t=>{e.indexOf(t.fromNode)!==-1&&e.indexOf(t.toNode)!==-1&&t.relations.forEach(c=>{c.lineShape=1})});const a=o.graphData.rootNode,d=o.getNodeById("t");d.x=a.x+1,d.y=a.y-500,d.force_weight=800;const r=p.createLayout({layoutName:"force"},o.options,o);r.isMainLayouer=!1,r.force_node_repulsion=.2,r.force_line_elastic=1.5,r.maxLayoutTimes=8e4,r.requireLinks=!1,r.layoutOptions.fixedRootNode=!0,await r.placeNodes(e,d),await I(d,d.x)},I=async(o,e)=>{u.value=setInterval(()=>{o.x=e+Math.floor(Math.random()*2e3-1e3)},3e3)},g=async()=>{const o=i.value.getInstance(),e=o.getNodes().filter(t=>t.data&&t.data.myGroupId==="bottom");e.forEach(t=>{t.junctionPoint="border",t.width=80,t.height=80,t.nodeShape=0}),o.getLinks().forEach(t=>{e.indexOf(t.fromNode)!==-1&&e.indexOf(t.toNode)!==-1&&t.relations.forEach(c=>{c.lineShape=1})});const a=o.graphData.rootNode,d=o.getNodeById("e");d.x=a.x-300,d.y=a.y+700;const r=p.createLayout({layoutName:"center"},o.options,o);r.isMainLayouer=!1,r.layoutOptions.distance_coefficient=.5,r.layoutOptions.fixedRootNode=!0,await r.placeNodes(e,d)},G=async()=>{const o=i.value.getInstance(),e=o.getNodes().filter(t=>t.data&&t.data.myGroupId==="bottom-right");e.forEach(t=>{t.junctionPoint="tb",t.width=80,t.height=80,t.nodeShape=0}),o.getLinks().forEach(t=>{e.indexOf(t.fromNode)!==-1&&e.indexOf(t.toNode)!==-1&&t.relations.forEach(c=>{c.lineShape=4})});const a=o.graphData.rootNode,d=o.getNodeById("br-root");d.x=a.x+900,d.y=a.y+300;const r=p.createLayout({layoutName:"tree",from:"top",max_per_height:160},o.options,o);r.isMainLayouer=!1,r.layoutOptions.distance_coefficient=.5,r.layoutOptions.fixedRootNode=!0,await r.placeNodes(e,d)};return _(()=>{l()}),L(()=>{console.log("beforeUnmount:clear timer"),clearInterval(u.value)}),(o,e)=>(m(),n("div",null,[w("div",S,[v(k(N),{ref_key:"graphRef",ref:i,options:y,"on-node-click":o.onNodeClick,"on-line-click":o.onLineClick,"on-node-expand":o.onNodeExpand,"on-node-collapse":o.onNodeCollapse},{node:O(({node:a})=>[a.id==="my-root"?(m(),n("div",B,f(a.text),1)):a.data.myGroupId==="left"?(m(),n("div",D,f(a.text),1)):a.data.myGroupId==="right"?(m(),n("div",M,f(a.text),1)):a.data.myGroupId==="top"?(m(),n("div",P,f(a.text),1)):a.data.myGroupId==="bottom"?(m(),n("div",j,f(a.text),1)):C("",!0)]),_:1},8,["on-node-click","on-line-click","on-node-expand","on-node-collapse"])])]))}});const U=E(T,[["__scopeId","data-v-c6935027"]]);export{U as default};
