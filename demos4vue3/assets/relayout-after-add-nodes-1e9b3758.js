import{M as _}from"./relation-graph-bae0ebdb.js";import{s as x}from"./CircumIcons-67a87dbf.js";import{d as N,r as g,o as T,a as r,c,b as k,e as y,w as C,u as f,t as w}from"./index-bbffd316.js";import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";const E={ref:"myPage",class:"my-graph",style:{height:"calc(100vh - 60px)"}},M={key:0,class:"my-add-button"},B={key:1,class:"my-node"},I=N({__name:"relayout-after-add-nodes",setup(P){const p={allowSwitchLineShape:!0,allowSwitchJunctionPoint:!0,defaultNodeColor:"transparent",defaultNodeBorderWidth:0,defaultNodeBorderColor:"transpanret",defaultLineColor:"rgba(128, 128, 255)",defaultNodeShape:1,toolBarDirection:"h",toolBarPositionH:"right",toolBarPositionV:"bottom",defaultPloyLineRadius:10,defaultLineShape:4,defaultLineWidth:2,defaultJunctionPoint:"lr",defaultLineTextOffset_y:-4,layout:{layoutName:"tree",from:"left",min_per_width:210,max_per_width:210,min_per_height:80,max_per_height:80}},l={rootId:"a",nodes:[{id:"a",text:"a",children:[{id:"b",text:"b",children:[{id:"b1",text:"b1",children:[{id:"b1-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"b2",text:"b2",children:[{id:"b2-1",text:"b2-1",children:[{id:"b2-1-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"b2-2",text:"b2-2",children:[{id:"b2-2-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"b2-add-button",text:"add node",data:{myType:"my-add-button"}}]},{id:"b-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"c",text:"c",children:[{id:"c1",text:"c1",children:[{id:"c1-add-button",text:"add node",data:{myType:"my-add-button"}}]},{id:"c2",text:"c2",children:[{id:"c2-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"c3",text:"c3",children:[{id:"c3-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"c-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]},{id:"a-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]}],lines:[]},s=g(null),m=async()=>{await u()},u=async()=>{await s.value.getInstance().setJsonData(l)},n=(e,a)=>{if(a)for(const t of a){if(t.id===e)return t;if(console.log(t.id,e),!t.children)continue;const d=n(e,t.children);if(d)return d}else return n(e,l.nodes)},h=async e=>{const a=e.lot.parent;console.log(" find ",a.id);const t=n(a.id),d=Math.ceil(Math.random()*3);for(let o=0;o<d;o++){console.log(o," of ",d);const i="N-"+Math.ceil(Math.random()*9999);t.children.push({id:i,text:i,children:[{id:i+"-add-button",text:"add node",disableNodeClickEffect:!0,data:{myType:"my-add-button"}}]})}t.children.sort((o,b)=>o.data&&o.data.myType==="my-add-button"?1:-1),console.log(d,t.children),await u()};return T(()=>{m()}),(e,a)=>(r(),c("div",null,[k("div",E,[y(f(_),{ref_key:"graphRef",ref:s,options:p},{node:C(({node:t})=>[t.data&&t.data.myType==="my-add-button"?(r(),c("div",M,[y(f(x),{size:"20px",name:"circle_plus",style:{cursor:"pointer"},onClick:d=>h(t)},null,8,["onClick"])])):(r(),c("div",B,w(t.text),1))]),_:1},512)],512)]))}});const R=v(I,[["__scopeId","data-v-94382045"]]);export{R as default};
