import{k as x}from"./relation-graph-585d193c.js";import{d as y,r as u,o as m,D as b,a,c as n,b as h,e as F,w as k,u as v,n as l,t as c}from"./index-5a571be1.js";const N={style:{height:"calc(100vh - 60px)"}},S={key:2,style:{lineHeight:"40px",width:"100%",height:"100%",border:"#999999 solid 1px",color:"#000000",borderRadius:"50%",boxSizing:"border-box",textAlign:"center"}},z=y({__name:"clock-and-tank",setup(_){const i=u(),d=u(null);let r=1;const p={lineUseTextPath:!0,defaultLineShape:1,placeSingleNode:!1,moveToCenterWhenRefresh:!0,zoomToFitWhenRefresh:!0,layouts:[{layoutName:"center",maxLayoutTimes:3e3}],allowShowMiniToolBar:!0,defaultNodeWidth:40,defaultNodeHeight:40,defaultNodeBorderWidth:0,defaultNodeColor:"transparent",backgroundColor:"transparent",defaultExpandHolderPosition:"right",defaultLineColor:"rgba(227,226,226,0.3)"},g=()=>{r>60&&(r=1);const e=i.value.getInstance();r===15&&e.startAutoLayout(),r===18&&e.zoomToFit();const o=e.graphData.rootNode;r<=20&&o&&(o.data.percent=r/15),r===60&&(o&&(o.data.percent=0),e.stopAutoLayout(),e.doLayout(),e.setZoom(100),e.zoomToFit());const t=e.getNodeById(r.toString()),s=e.getNodeById("current");!t||!s||(s.x=t.x,s.y=t.y,e.options.checkedNodeId="current",e.options.checkedLineId=e.getLinks().find(f=>f.toNode.id===t.id).relations[0].id,r++)};return m(()=>{const e={rootId:"root",nodes:[{id:"root",text:"",width:100,height:100,data:{percent:0}}],lines:[]};for(let o=1;o<61;o++)e.nodes.push({id:o.toString(),text:o.toString()}),e.lines.push({from:"root",to:o.toString(),text:""});e.nodes.push({id:"current",text:"",x:-20,y:-20}),i.value.setJsonData(e,!0,()=>{d.value=setInterval(()=>{g()},500)})}),b(()=>{console.log("beforeDestroy:clear clock:",d.value),clearInterval(d.value)}),(e,o)=>(a(),n("div",null,[h("div",N,[F(v(x),{ref_key:"graphRef",ref:i,options:p},{node:k(({node:t})=>[t.id==="current"?(a(),n("div",{key:0,style:l({zIndex:555,opacity:.5,lineHeight:"40px",width:"100%",height:"100%",color:"#000000",borderRadius:"50%",boxSizing:"border-box",background:"linear-gradient(to right, #00FFFF, #FF00FF)"})},c(t.text),5)):t.id==="root"?(a(),n("div",{key:1,style:l({zIndex:555,opacity:.5,lineHeight:"100px",width:"100%",height:"100%",color:"#000000",borderRadius:"50%",boxSizing:"border-box",fontSize:"32px",textAlign:"center",overflow:"hidden",border:"#000000 solid 1px"})},[h("div",{style:l({width:"100%",height:t.data.percent*100+"%",marginTop:(1-t.data.percent)*100+"%",background:"linear-gradient(to bottom, #00FFFF, #FF00FF)"})},c(t.text),5)],4)):(a(),n("div",S,c(t.text),1))]),_:1},512)])]))}});export{z as default};
