import{m as c,b as d,n as l}from"./index-cdb280d3.js";var m=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticStyle:{height:"calc(100vh - 60px)",padding:"0px"}},[t("iframe",{ref:"targetWindowRef",staticStyle:{border:"0px"},attrs:{width:"100%",height:"100%",frameborder:"0",src:e.currentReactDemoUrl}})])},u=[];const f={name:"ReactDemo",components:{},data(){return{currentReactDemoUrl:null}},computed:{...c(["isMobile","english"]),...d({userInfo:e=>e.user.userInfo}),isAdmin(){return this.userInfo&&this.userInfo.roles.includes("rg-admin")}},watch:{$route(e,o){this.loadDemo()}},created(){},mounted(){this.loadDemo();const e=window.origin,o=this.$refs.targetWindowRef.contentWindow;this.messageReceiver=async t=>{console.log("TOP:event.from.Vue3:",t.origin,t.data);const{action:s,url:n,data:a}=t.data;if(s==="postJson"){const i=await this.SeeksHttp.postJson(n,a);o.postMessage({action:"returnPostJson",data:i.data},e)}else s==="getUserInfo"&&(console.log("TOP:send.data:getUserInfo:to:Vue3",t.data),o.postMessage({action:"setUserInfo",data:this.userInfo},e))},window.addEventListener("message",this.messageReceiver)},methods:{loadDemo(){const e=this.$route.query.id,t="/demos4vue3";this.currentReactDemoUrl=`${t}/?demoId=${e}`,console.log("Go to:",this.currentReactDemoUrl)}},beforeRouteLeave(e,o,t){window.removeEventListener("message",this.messageReceiver),console.log("beforeRouteLeave"),this.$destroy(),t()}},r={};var h=l(f,m,u,!1,g,null,null,null);function g(e){for(let o in r)this[o]=r[o]}const v=function(){return h.exports}();export{v as default};
