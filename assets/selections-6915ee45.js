import{n as f}from"./index-3f3d9b78.js";const m={name:"Demo",components:{},data(){return{myDisableDragCanvas:!1,selectedNodes:[],graphOptions:{debug:!1,allowSwitchLineShape:!0,allowSwitchJunctionPoint:!0,allowShowDownloadButton:!0,defaultJunctionPoint:"border",placeOtherNodes:!1,placeSingleNode:!1,defaultNodeColor:"#f39930",defaultNodeBorderWidth:1,defaultNodeBorderColor:"#f39930",defaultLineColor:"#f39930",defaultLineWidth:2,defaultLineTextOffset_y:-2,disableDragCanvas:!1,layout:{layoutName:"center"}}}},mounted(){this.showGraph()},methods:{showGraph(){const t={rootId:"2",nodes:[{id:"1",text:"Node-1",data:{myicon:"el-icon-star-on"}},{id:"2",text:"Node-2",data:{myicon:"el-icon-setting"}},{id:"3",text:"Node-3",data:{myicon:"el-icon-setting"}},{id:"4",text:"Node-4",data:{myicon:"el-icon-star-on"}},{id:"6",text:"Node-6",data:{myicon:"el-icon-setting"}},{id:"7",text:"Node-7",data:{myicon:"el-icon-setting"}},{id:"8",text:"Node-8",data:{myicon:"el-icon-star-on"}},{id:"9",text:"Node-9",data:{myicon:"el-icon-headset"}},{id:"71",text:"Node-71",data:{myicon:"el-icon-headset"}},{id:"72",text:"Node-72",data:{myicon:"el-icon-s-tools"}},{id:"73",text:"Node-73",data:{myicon:"el-icon-star-on"}},{id:"81",text:"Node-81",data:{myicon:"el-icon-s-promotion"}},{id:"82",text:"Node-82",data:{myicon:"el-icon-s-promotion"}},{id:"83",text:"Node-83",data:{myicon:"el-icon-star-on"}},{id:"84",text:"Node-84",data:{myicon:"el-icon-s-promotion"}},{id:"85",text:"Node-85",data:{myicon:"el-icon-sunny"}},{id:"91",text:"Node-91",data:{myicon:"el-icon-sunny"}},{id:"92",text:"Node-82",data:{myicon:"el-icon-sunny"}},{id:"51",text:"Node-51",data:{myicon:"el-icon-sunny"}},{id:"52",text:"Node-52",data:{myicon:"el-icon-sunny"}},{id:"53",text:"Node-53",data:{myicon:"el-icon-sunny"}},{id:"54",text:"Node-54",data:{myicon:"el-icon-sunny"}},{id:"55",text:"Node-55",data:{myicon:"el-icon-sunny"}},{id:"5",text:"Node-5",data:{myicon:"el-icon-sunny"}}],lines:[{from:"7",to:"71"},{from:"7",to:"72"},{from:"7",to:"73"},{from:"8",to:"81"},{from:"8",to:"82"},{from:"8",to:"83"},{from:"8",to:"84"},{from:"8",to:"85"},{from:"9",to:"91"},{from:"9",to:"92"},{from:"5",to:"51"},{from:"5",to:"52"},{from:"5",to:"53"},{from:"5",to:"54"},{from:"5",to:"55"},{from:"1",to:"2"},{from:"3",to:"1"},{from:"4",to:"2"},{from:"6",to:"2"},{from:"7",to:"2"},{from:"8",to:"2"},{from:"9",to:"2"},{from:"1",to:"5"}]};this.$refs.graphRef.setJsonData(t,o=>{})},toggleDisableDragCanvas(){this.myDisableDragCanvas=!this.myDisableDragCanvas;const t=this.$refs.graphRef.getInstance();t.options.disableDragCanvas=this.myDisableDragCanvas},onCanvasSelectionEnd(t,o){console.log("onCanvasSelectionEnd:",t);const e=this.$refs.graphRef.getInstance(),n=e.getBoundingClientRect(),s=e.getCanvasCoordinateByClientCoordinate({x:t.x+n.x,y:t.y+n.y}),i=e.getCanvasCoordinateByClientCoordinate({x:t.x+t.width+n.x,y:t.y+t.height+n.y});e.getNodes().forEach(a=>{let d=!1;const c=a.x+a.el.offsetWidth/2,r=a.y+a.el.offsetHeight/2;c>s.x&&r>s.y&&c<i.x&&r<i.y&&(d=!0),a.selected=d}),this.updateSelectedNodes()},onCanvasClick(){this.clearSelection()},clearSelection(){this.$refs.graphRef.getInstance().getNodes().forEach(o=>{o.selected=!1}),this.updateSelectedNodes()},updateSelectedNodes(){this.selectedNodes=[],this.$refs.graphRef.getInstance().getNodes().forEach(o=>{o.selected&&this.selectedNodes.push(o)})}}};var y=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("div",{staticStyle:{height:"calc(100vh - 60px)"}},[e("RelationGraph",{ref:"graphRef",attrs:{options:t.graphOptions,"on-canvas-selection-end":t.onCanvasSelectionEnd,"on-canvas-click":t.onCanvasClick},scopedSlots:t._u([{key:"node",fn:function(n){var s=n.node;return[e("div",{staticClass:"c-my-node-icon"},[e("i",{class:s.data.myicon,staticStyle:{"font-size":"30px"}})])]}},{key:"graph-plug",fn:function(){return[e("div",{staticClass:"c-my-panel"},[e("div",{staticClass:"c-option-name"},[t._v("操作说明：")]),e("div",{staticClass:"c-option-name"},[t._v("方式1：按住Shift开始框选")]),e("div",{staticClass:"c-option-name"},[t._v("方式2：禁用拖拽画布来支持框选")]),e("div",{staticClass:"c-option-name"},[e("button",{staticClass:"c-my-button",class:{"c-my-button-checked":t.myDisableDragCanvas},on:{click:t.toggleDisableDragCanvas}},[t._v(" "+t._s(t.myDisableDragCanvas?"已禁用拖住":"未禁用拖住")+" ")])]),e("div",{staticClass:"c-option-name"},[t._v("当前已选择节点个数："+t._s(t.selectedNodes.length))])])]},proxy:!0},{key:"canvas-plug",fn:function(){},proxy:!0}])})],1)])},h=[];const l={};var u=f(m,y,h,!1,p,"28e316be",null,null);function p(t){for(let o in l)this[o]=l[o]}const v=function(){return u.exports}();export{v as default};
