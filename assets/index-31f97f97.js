import{g as ye}from"./index-cdb280d3.js";import{d as Ae,i as Ee}from"./is-graph-e3e0f07a.js";var Re=Ae,_e=Ee,Se={dimensions:["x","y"],center:.5,scale:1};function we(u,f,e){if(!_e(f))throw new Error("graphology-layout/random: the given graph is not a valid graphology instance.");e=Re(e,Se);var c=e.dimensions;if(!Array.isArray(c)||c.length!==2)throw new Error("graphology-layout/random: given dimensions are invalid.");var h=e.center,n=e.scale,r=Math.PI*2,s=(h-.5)*n,a=f.order,w=c[0],L=c[1];function D(_,C){return C[w]=n*Math.cos(_*r/a)+s,C[L]=n*Math.sin(_*r/a)+s,C}var l=0;if(!u){var $={};return f.forEachNode(function(_){$[_]=D(l++,{})}),$}f.updateEachNodeAttributes(function(_,C){return D(l++,C),C},{attributes:c})}var De=we.bind(null,!1);De.assign=we.bind(null,!0);var Ie=De;const qe=ye(Ie);var oe={};function pe(u){return typeof u!="number"||isNaN(u)?1:u}function Te(u,f){var e={},c=function(r){return typeof r>"u"?f:r};typeof f=="function"&&(c=f);var h=function(r){return c(r[u])},n=function(){return c(void 0)};return typeof u=="string"?(e.fromAttributes=h,e.fromGraph=function(r,s){return h(r.getNodeAttributes(s))},e.fromEntry=function(r,s){return h(s)}):typeof u=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},e.fromGraph=function(r,s){return c(u(s,r.getNodeAttributes(s)))},e.fromEntry=function(r,s){return c(u(r,s))}):(e.fromAttributes=n,e.fromGraph=n,e.fromEntry=n),e}function me(u,f){var e={},c=function(r){return typeof r>"u"?f:r};typeof f=="function"&&(c=f);var h=function(r){return c(r[u])},n=function(){return c(void 0)};return typeof u=="string"?(e.fromAttributes=h,e.fromGraph=function(r,s){return h(r.getEdgeAttributes(s))},e.fromEntry=function(r,s){return h(s)},e.fromPartialEntry=e.fromEntry,e.fromMinimalEntry=e.fromEntry):typeof u=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},e.fromGraph=function(r,s){var a=r.extremities(s);return c(u(s,r.getEdgeAttributes(s),a[0],a[1],r.getNodeAttributes(a[0]),r.getNodeAttributes(a[1]),r.isUndirected(s)))},e.fromEntry=function(r,s,a,w,L,D,l){return c(u(r,s,a,w,L,D,l))},e.fromPartialEntry=function(r,s,a,w){return c(u(r,s,a,w))},e.fromMinimalEntry=function(r,s){return c(u(r,s))}):(e.fromAttributes=n,e.fromGraph=n,e.fromEntry=n,e.fromMinimalEntry=n),e}oe.createNodeValueGetter=Te;oe.createEdgeValueGetter=me;oe.createEdgeWeightGetter=function(u){return me(u,pe)};var R=0,G=1,v=2,g=3,k=4,U=5,E=6,he=7,le=8,ve=9,Le=0,Oe=1,ze=2,S=0,z=1,p=2,Q=3,V=4,A=5,T=6,P=7,W=8,ge=3,H=10,Ce=3,I=9,ie=10,He=function(f,e,c){var h,n,r,s,a,w,L,D,l,$,_=e.length,C=c.length,B=f.adjustSizes,d=f.barnesHutTheta*f.barnesHutTheta,ee,m,b,y,j,i,o,t=[];for(r=0;r<_;r+=H)e[r+k]=e[r+v],e[r+U]=e[r+g],e[r+v]=0,e[r+g]=0;if(f.outboundAttractionDistribution){for(ee=0,r=0;r<_;r+=H)ee+=e[r+E];ee/=_/H}if(f.barnesHutOptimize){var q=1/0,F=-1/0,J=1/0,X=-1/0,O,Y,ae;for(r=0;r<_;r+=H)q=Math.min(q,e[r+R]),F=Math.max(F,e[r+R]),J=Math.min(J,e[r+G]),X=Math.max(X,e[r+G]);var re=F-q,ne=X-J;for(re>ne?(J-=(re-ne)/2,X=J+re):(q-=(ne-re)/2,F=q+ne),t[0+S]=-1,t[0+z]=(q+F)/2,t[0+p]=(J+X)/2,t[0+Q]=Math.max(F-q,X-J),t[0+V]=-1,t[0+A]=-1,t[0+T]=0,t[0+P]=0,t[0+W]=0,h=1,r=0;r<_;r+=H)for(n=0,ae=ge;;)if(t[n+A]>=0){e[r+R]<t[n+z]?e[r+G]<t[n+p]?O=t[n+A]:O=t[n+A]+I:e[r+G]<t[n+p]?O=t[n+A]+I*2:O=t[n+A]+I*3,t[n+P]=(t[n+P]*t[n+T]+e[r+R]*e[r+E])/(t[n+T]+e[r+E]),t[n+W]=(t[n+W]*t[n+T]+e[r+G]*e[r+E])/(t[n+T]+e[r+E]),t[n+T]+=e[r+E],n=O;continue}else if(t[n+S]<0){t[n+S]=r;break}else{if(t[n+A]=h*I,D=t[n+Q]/2,l=t[n+A],t[l+S]=-1,t[l+z]=t[n+z]-D,t[l+p]=t[n+p]-D,t[l+Q]=D,t[l+V]=l+I,t[l+A]=-1,t[l+T]=0,t[l+P]=0,t[l+W]=0,l+=I,t[l+S]=-1,t[l+z]=t[n+z]-D,t[l+p]=t[n+p]+D,t[l+Q]=D,t[l+V]=l+I,t[l+A]=-1,t[l+T]=0,t[l+P]=0,t[l+W]=0,l+=I,t[l+S]=-1,t[l+z]=t[n+z]+D,t[l+p]=t[n+p]-D,t[l+Q]=D,t[l+V]=l+I,t[l+A]=-1,t[l+T]=0,t[l+P]=0,t[l+W]=0,l+=I,t[l+S]=-1,t[l+z]=t[n+z]+D,t[l+p]=t[n+p]+D,t[l+Q]=D,t[l+V]=t[n+V],t[l+A]=-1,t[l+T]=0,t[l+P]=0,t[l+W]=0,h+=4,e[t[n+S]+R]<t[n+z]?e[t[n+S]+G]<t[n+p]?O=t[n+A]:O=t[n+A]+I:e[t[n+S]+G]<t[n+p]?O=t[n+A]+I*2:O=t[n+A]+I*3,t[n+T]=e[t[n+S]+E],t[n+P]=e[t[n+S]+R],t[n+W]=e[t[n+S]+G],t[O+S]=t[n+S],t[n+S]=-1,e[r+R]<t[n+z]?e[r+G]<t[n+p]?Y=t[n+A]:Y=t[n+A]+I:e[r+G]<t[n+p]?Y=t[n+A]+I*2:Y=t[n+A]+I*3,O===Y)if(ae--){n=O;continue}else{ae=ge;break}t[Y+S]=r;break}}if(f.barnesHutOptimize)for(m=f.scalingRatio,r=0;r<_;r+=H)for(n=0;;)if(t[n+A]>=0)if(i=Math.pow(e[r+R]-t[n+P],2)+Math.pow(e[r+G]-t[n+W],2),$=t[n+Q],4*$*$/i<d){if(b=e[r+R]-t[n+P],y=e[r+G]-t[n+W],B===!0?i>0?(o=m*e[r+E]*t[n+T]/i,e[r+v]+=b*o,e[r+g]+=y*o):i<0&&(o=-m*e[r+E]*t[n+T]/Math.sqrt(i),e[r+v]+=b*o,e[r+g]+=y*o):i>0&&(o=m*e[r+E]*t[n+T]/i,e[r+v]+=b*o,e[r+g]+=y*o),n=t[n+V],n<0)break;continue}else{n=t[n+A];continue}else{if(w=t[n+S],w>=0&&w!==r&&(b=e[r+R]-e[w+R],y=e[r+G]-e[w+G],i=b*b+y*y,B===!0?i>0?(o=m*e[r+E]*e[w+E]/i,e[r+v]+=b*o,e[r+g]+=y*o):i<0&&(o=-m*e[r+E]*e[w+E]/Math.sqrt(i),e[r+v]+=b*o,e[r+g]+=y*o):i>0&&(o=m*e[r+E]*e[w+E]/i,e[r+v]+=b*o,e[r+g]+=y*o)),n=t[n+V],n<0)break;continue}else for(m=f.scalingRatio,s=0;s<_;s+=H)for(a=0;a<s;a+=H)b=e[s+R]-e[a+R],y=e[s+G]-e[a+G],B===!0?(i=Math.sqrt(b*b+y*y)-e[s+le]-e[a+le],i>0?(o=m*e[s+E]*e[a+E]/i/i,e[s+v]+=b*o,e[s+g]+=y*o,e[a+v]-=b*o,e[a+g]-=y*o):i<0&&(o=100*m*e[s+E]*e[a+E],e[s+v]+=b*o,e[s+g]+=y*o,e[a+v]-=b*o,e[a+g]-=y*o)):(i=Math.sqrt(b*b+y*y),i>0&&(o=m*e[s+E]*e[a+E]/i/i,e[s+v]+=b*o,e[s+g]+=y*o,e[a+v]-=b*o,e[a+g]-=y*o));for(l=f.gravity/f.scalingRatio,m=f.scalingRatio,r=0;r<_;r+=H)o=0,b=e[r+R],y=e[r+G],i=Math.sqrt(Math.pow(b,2)+Math.pow(y,2)),f.strongGravityMode?i>0&&(o=m*e[r+E]*l):i>0&&(o=m*e[r+E]*l/i),e[r+v]-=b*o,e[r+g]-=y*o;for(m=1*(f.outboundAttractionDistribution?ee:1),L=0;L<C;L+=Ce)s=c[L+Le],a=c[L+Oe],D=c[L+ze],j=Math.pow(D,f.edgeWeightInfluence),b=e[s+R]-e[a+R],y=e[s+G]-e[a+G],B===!0?(i=Math.sqrt(b*b+y*y)-e[s+le]-e[a+le],f.linLogMode?f.outboundAttractionDistribution?i>0&&(o=-m*j*Math.log(1+i)/i/e[s+E]):i>0&&(o=-m*j*Math.log(1+i)/i):f.outboundAttractionDistribution?i>0&&(o=-m*j/e[s+E]):i>0&&(o=-m*j)):(i=Math.sqrt(Math.pow(b,2)+Math.pow(y,2)),f.linLogMode?f.outboundAttractionDistribution?i>0&&(o=-m*j*Math.log(1+i)/i/e[s+E]):i>0&&(o=-m*j*Math.log(1+i)/i):f.outboundAttractionDistribution?(i=1,o=-m*j/e[s+E]):(i=1,o=-m*j)),i>0&&(e[s+v]+=b*o,e[s+g]+=y*o,e[a+v]-=b*o,e[a+g]-=y*o);var te,M,ue,K,fe,se;if(B===!0)for(r=0;r<_;r+=H)e[r+ve]!==1&&(te=Math.sqrt(Math.pow(e[r+v],2)+Math.pow(e[r+g],2)),te>ie&&(e[r+v]=e[r+v]*ie/te,e[r+g]=e[r+g]*ie/te),M=e[r+E]*Math.sqrt((e[r+k]-e[r+v])*(e[r+k]-e[r+v])+(e[r+U]-e[r+g])*(e[r+U]-e[r+g])),ue=Math.sqrt((e[r+k]+e[r+v])*(e[r+k]+e[r+v])+(e[r+U]+e[r+g])*(e[r+U]+e[r+g]))/2,K=.1*Math.log(1+ue)/(1+Math.sqrt(M)),fe=e[r+R]+e[r+v]*(K/f.slowDown),e[r+R]=fe,se=e[r+G]+e[r+g]*(K/f.slowDown),e[r+G]=se);else for(r=0;r<_;r+=H)e[r+ve]!==1&&(M=e[r+E]*Math.sqrt((e[r+k]-e[r+v])*(e[r+k]-e[r+v])+(e[r+U]-e[r+g])*(e[r+U]-e[r+g])),ue=Math.sqrt((e[r+k]+e[r+v])*(e[r+k]+e[r+v])+(e[r+U]+e[r+g])*(e[r+U]+e[r+g]))/2,K=e[r+he]*Math.log(1+ue)/(1+Math.sqrt(M)),e[r+he]=Math.min(1,Math.sqrt(K*(Math.pow(e[r+v],2)+Math.pow(e[r+g],2))/(1+Math.sqrt(M)))),fe=e[r+R]+e[r+v]*(K/f.slowDown),e[r+R]=fe,se=e[r+G]+e[r+g]*(K/f.slowDown),e[r+G]=se);return{}},Z={},x=10,be=3;Z.assign=function(u){u=u||{};var f=Array.prototype.slice.call(arguments).slice(1),e,c,h;for(e=0,h=f.length;e<h;e++)if(f[e])for(c in f[e])u[c]=f[e][c];return u};Z.validateSettings=function(u){return"linLogMode"in u&&typeof u.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in u&&typeof u.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in u&&typeof u.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in u&&typeof u.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in u&&!(typeof u.scalingRatio=="number"&&u.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in u&&typeof u.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in u&&!(typeof u.gravity=="number"&&u.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in u&&!(typeof u.slowDown=="number"||u.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in u&&typeof u.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in u&&!(typeof u.barnesHutTheta=="number"&&u.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null};Z.graphToByteArrays=function(u,f){var e=u.order,c=u.size,h={},n,r=new Float32Array(e*x),s=new Float32Array(c*be);return n=0,u.forEachNode(function(a,w){h[a]=n,r[n]=w.x,r[n+1]=w.y,r[n+2]=0,r[n+3]=0,r[n+4]=0,r[n+5]=0,r[n+6]=1,r[n+7]=1,r[n+8]=w.size||1,r[n+9]=w.fixed?1:0,n+=x}),n=0,u.forEachEdge(function(a,w,L,D,l,$,_){var C=h[L],B=h[D],d=f(a,w,L,D,l,$,_);r[C+6]+=d,r[B+6]+=d,s[n]=C,s[n+1]=B,s[n+2]=d,n+=be}),{nodes:r,edges:s}};Z.assignLayoutChanges=function(u,f,e){var c=0;u.updateEachNodeAttributes(function(h,n){return n.x=f[c],n.y=f[c+1],c+=x,e?e(h,n):n})};Z.readGraphPositions=function(u,f){var e=0;u.forEachNode(function(c,h){f[e]=h.x,f[e+1]=h.y,e+=x})};Z.collectLayoutChanges=function(u,f,e){for(var c=u.nodes(),h={},n=0,r=0,s=f.length;n<s;n+=x){if(e){var a=Object.assign({},u.getNodeAttributes(c[r]));a.x=f[n],a.y=f[n+1],a=e(c[r],a),h[c[r]]={x:a.x,y:a.y}}else h[c[r]]={x:f[n],y:f[n+1]};r++}return h};Z.createWorker=function(f){var e=window.URL||window.webkitURL,c=f.toString(),h=e.createObjectURL(new Blob(["("+c+").call(this);"],{type:"text/javascript"})),n=new Worker(h);return e.revokeObjectURL(h),n};var Pe={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5},We=Ee,je=oe.createEdgeWeightGetter,ke=He,N=Z,Ue=Pe;function Ge(u,f,e){if(!We(f))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof e=="number"&&(e={iterations:e});var c=e.iterations;if(typeof c!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(c<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var h=je("getEdgeWeight"in e?e.getEdgeWeight:"weight").fromEntry,n=typeof e.outputReducer=="function"?e.outputReducer:null,r=N.assign({},Ue,e.settings),s=N.validateSettings(r);if(s)throw new Error("graphology-layout-forceatlas2: "+s.message);var a=N.graphToByteArrays(f,h),w;for(w=0;w<c;w++)ke(r,a.nodes,a.edges);if(u){N.assignLayoutChanges(f,a.nodes,n);return}return N.collectLayoutChanges(f,a.nodes)}function $e(u){var f=typeof u=="number"?u:u.order;return{barnesHutOptimize:f>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(f)}}var ce=Ge.bind(null,!1);ce.assign=Ge.bind(null,!0);ce.inferSettings=$e;var Be=ce;const Je=ye(Be);export{qe as c,Je as f};
