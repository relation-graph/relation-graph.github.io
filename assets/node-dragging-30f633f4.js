import{n as g,$ as h}from"./index-f0317518.js";var u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{height:"calc(100vh - 60px)"}},[o("RelationGraph",{ref:"graphRef",attrs:{options:e.graphOptions,"on-node-click":e.onNodeClick,"on-line-click":e.onLineClick,"on-node-dragging":e.onNodeDragging,"on-node-drag-start":e.onNodeDragStart,"on-node-drag-end":e.onNodeDragEnd},scopedSlots:e._u([{key:"node",fn:function(a){var r=a.node;return[o("div",[o("div",{staticStyle:{"background-color":"#f39930"}},[e._v(e._s(r.text))]),r.id==="SYS_ROLE"?o("div",{staticStyle:{color:"#df7f03",padding:"10px"}},[e._v("Not allowed to enter")]):e._e()])]}},{key:"graph-plug",fn:function(){return[o("div",{staticStyle:{"z-index":"300",position:"absolute",left:"10px",top:"calc(100% - 140px)","font-size":"12px","background-color":"#ffffff",border:"#efefef solid 1px","border-radius":"10px",width:"250px",height:"130px"}},[o("div",{staticStyle:{"padding-left":"10px"}},[o("div",{staticStyle:{"line-height":"30px"}},[e._v("The color of the moving over nodeï¼š")]),o("div",{staticStyle:{"margin-top":"10px"}},[e._v(" Allowed drop "),o("div",{staticStyle:{height:"5px",width:"80px","background-color":"rgba(212,252,189,0.82)"}})]),o("div",{staticStyle:{"margin-top":"10px"}},[e._v(" Not allowed drop "),o("div",{staticStyle:{height:"5px",width:"80px","background-color":"rgba(252,189,189,0.82)"}})]),o("div",{staticStyle:{"margin-top":"10px"}},[e._v(" Not allowed to enter "),o("div",{staticStyle:{height:"5px",width:"80px","background-color":"rgba(214,165,246,0.82)"}})])])])]},proxy:!0},{key:"canvas-plug",fn:function(){},proxy:!0}])})],1)])},_=[];const{RGNodesAnalytic:l}=h,v={name:"Demo",components:{},data(){return{isShowCodePanel:!1,graphOptions:{debug:!1,backgroundImage:"/images/graph-grid-bg.png",allowSwitchLineShape:!0,allowSwitchJunctionPoint:!0,allowShowDownloadButton:!0,defaultJunctionPoint:"border",placeOtherNodes:!1,placeSingleNode:!1,graphOffset_x:-200,graphOffset_y:100,defaultNodeColor:"#ffffff",defaultNodeBorderWidth:1,defaultNodeBorderColor:"#f39930",defaultNodeWidth:170,defaultNodeHeight:70,defaultLineColor:"#f39930",defaultLineWidth:2,layout:{layoutName:"fixed"}}}},mounted(){this.showGraph()},methods:{showGraph(){const e={rootId:"SYS_ROLE",nodes:[{id:"SYS_USER",text:"SYS_USER",nodeShape:1,opacity:1,x:-32,y:-427,width:120,height:80,data:{dropAble:!0}},{id:"SYS_DEPT",text:"SYS_DEPT",nodeShape:0,opacity:1,x:-244,y:-283,data:{dropAble:!0}},{id:"SYS_ROLE",text:"SYS_ROLE",nodeShape:1,opacity:1,x:-21,y:-171,width:300,height:200,data:{allowOverlap:!1}},{id:"SYS_USER_ROLE",text:"SYS_USER_ROLE",nodeShape:1,opacity:1,x:405,y:-174},{id:"SYS_RESOURCE",text:"SYS_RESOURCE",nodeShape:1,opacity:1,x:-246,y:-80},{id:"SYS_ROLE_RESOURCE",text:"SYS_ROLE_RESOURCE",nodeShape:1,opacity:1,x:338,y:-100}],lines:[{from:"SYS_DEPT",to:"SYS_USER"},{from:"SYS_DEPT",to:"SYS_USER"},{from:"SYS_DEPT",to:"SYS_USER"},{from:"SYS_DEPT",to:"SYS_USER"},{from:"SYS_DEPT",to:"SYS_USER"},{from:"SYS_DEPT",to:"SYS_USER"}]};this.$refs.graphRef.setJsonData(e,t=>{})},onNodeDragging(e,t,o,a){console.log("onNodeDragging:",e);const r=this.$refs.graphRef.getInstance();let i=!1,d;for(const n of r.getNodes()){if(e===n)continue;const S=e.nodeShape||r.options.defaultNodeShape||0,c=n.nodeShape||r.options.defaultNodeShape||0,f={el:e.el,x:t,y:o};if(l.shapesOverlap(f,n,S,c)){let s=n.data.dropAble?"rgba(212,252,189,0.82)":"rgba(252,189,189,0.82)";n.data.allowOverlap===!1&&(i=!0,d=l.getNoOverlapLimitedPosition(e,t,o,n),s="rgba(214,165,246,0.82)"),n.data.orignColorSaved||(n.data.orignColorSaved=!0,n.data.orignColor=n.color),n.color=s}else n.color=void 0}if(i)return d},onNodeDragStart(e,t){console.log("onNodeDragStart:",e),e.data.startX=e.x,e.data.startY=e.y},onNodeDragEnd(e,t){console.log("onNodeDragEnd:",e);const o=this.$refs.graphRef.getInstance();for(const a of o.getNodes()){if(e===a||a.data.allowOverlap===!1||!a.data.dropAble)continue;const r=e.nodeShape||o.options.defaultNodeShape||0,i=a.nodeShape||o.options.defaultNodeShape||0;if(l.shapesOverlap(e,a,r,i)){this.updateNodeAsChildren(e,a);break}}for(const a of o.getNodes())a.color=a.data.orignColor},updateNodeAsChildren(e,t){console.log("updateNodeAsChildren:",t.id,"---->",e.id),e.x=e.data.startX,e.y=e.data.startY,this.$refs.graphRef.getInstance().addLines([{from:t.id,to:e.id,color:"rgba(214,165,246,0.82)",lineWidth:3}])},onNodeClick(e,t){console.log("onNodeClick:",e)},onLineClick(e,t,o){console.log("onLineClick:",e)}}},p={};var x=g(v,u,_,!1,y,"71158638",null,null);function y(e){for(let t in p)this[t]=p[t]}const R=function(){return x.exports}();export{R as default};
