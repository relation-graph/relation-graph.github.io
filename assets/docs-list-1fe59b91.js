import{m as o,b as n,f as r,n as c}from"./index-3a2b9e72.js";import{R as l}from"./rg-header-cbdb9710.js";import d from"./relation-graph-logo-e4609733.js";import{R as p}from"./rg-footer-cc5a3126.js";import"./svg-sprites-virtual-module-d0efe676.js";var u=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("rg-header",{attrs:{title:"用户中心"}}),t("div",{class:[e.isMobile?"c-page-mobile":"c-page-pc"]},[t("div",{staticStyle:{"max-width":"1200px","margin-left":"auto","margin-right":"auto",padding:"30px"}},[t("div",{staticClass:"c-vip-thanks",staticStyle:{position:"relative"}},[t("div",{staticClass:"c-vip-thanks-left"},[t("div",{staticClass:"hoja"},[t("div",{staticStyle:{"padding-top":"7px"}},[t("Logo",{attrs:{width:"25",height:"25"}})],1)])]),e._m(0),t("div",{staticStyle:{clear:"both"}}),t("div",{staticStyle:{position:"absolute",right:"10px",top:"10px","background-color":"rgba(255,255,255,0.48)",height:"40px","padding-left":"20px","padding-right":"20px","border-radius":"7px"}},[t("div",{staticClass:"c-user-welcome-text",staticStyle:{"font-size":"14px","text-align":"right","line-height":"40px"}},[t("span",{staticStyle:{color:"#df7f03"}},[e._v(e._s(e.userNickName))]),t("el-link",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.logout}},[t("i",{staticClass:"el-icon-switch-button"}),e._v(" 退出登录")])],1)]),t("div",{staticStyle:{"padding-bottom":"20px",position:"absolute",right:"30px",bottom:"0px"}},[t("div",{staticClass:"c-user-welcome-text",staticStyle:{"font-size":"14px"}},[t("el-link",{attrs:{type:"primary",icon:"el-icon-present",href:"/#/new",target:"_blank"}},[e._v("新建文档")])],1)])]),t("div",{staticStyle:{clear:"both"}}),t("div",[e._m(1),t("div",e._l(e.myDocs,function(i){return t("div",{key:i.docId,staticClass:"c-my-doc",staticStyle:{position:"relative"}},[t("div",{staticStyle:{position:"absolute",left:"20px"}},[t("span",{staticClass:"c-docinfo-time"},[e._v(e._s(e.$dayjs(i.createTime).format("YYYY-MM-DD HH:mm:ss"))+" 创建")]),t("el-link",{attrs:{type:"primary",icon:"el-icon-share",target:"_blank",href:"/#/graph/"+i.docId}},[e._v(" "+e._s(i.name))])],1),t("div",{staticClass:"c-delete-doc-button",staticStyle:{position:"absolute",right:"0px"}},[t("el-popconfirm",{attrs:{"confirm-button-text":"是的","cancel-button-text":"算了，先不删除了",icon:"el-icon-info","icon-color":"red",title:"确定要删除吗？"},on:{confirm:function(f){return e.deleteDoc(i)}},scopedSlots:e._u([{key:"reference",fn:function(){return[t("el-link",{attrs:{type:"danger",icon:"el-icon-delete"}},[e._v("删除")])]},proxy:!0}],null,!0)}),t("span",{staticClass:"c-docinfo-time",staticStyle:{"padding-left":"10px"}},[e._v("最后修改："+e._s(e.$dayjs(i.lastUpdateTime).format("YYYY-MM-DD HH:mm:ss")))])],1),t("div",{staticStyle:{clear:"both"}})])}),0)])]),t("div",{staticStyle:{height:"600px"}}),t("rg-footer")],1)],1)},m=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"c-vip-thanks-right"},[t("div",{staticStyle:{"font-weight":"bold","font-size":"14px","line-height":"30px",color:"rgb(62, 80, 96)"}},[e._v("尊敬的VIP会员您好！")]),t("div",{staticStyle:{"font-size":"14px","line-height":"25px",color:"rgb(62, 80, 96)"}},[t("div",[e._v("感谢您的支持，您的支持能让 relation-graph 能够走的更远、更持久。")])])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("h3",{staticStyle:{"font-size":"14px"}},[e._v("我的文档：")])])}];const h={name:"DocsIndex",components:{RgFooter:p,RgHeader:l,Logo:d},data(){return{checkedRoute:null,myDocs:[]}},computed:{...o(["isMobile"]),...n({userInfo:e=>e.user.userInfo}),isVipUser(){return this.userInfo&&this.userInfo.roles.length>0},userNickName(){return this.userInfo&&this.userInfo.account||""}},mounted(){this.loadMyDocs()},methods:{async logout(){await this.$store.dispatch("user/logout"),await this.$router.push("/login")},exchangeCoupon(){this.$prompt(this.isVipUser?"您已经是会员，您仍然可以使用兑换码为会员续期":"","使用兑换码：",{closeOnClickModal:!1,confirmButtonText:"确定兑换",inputPattern:/^.{6,50}$/,inputErrorMessage:"请输入正确格式的兑换码"}).then(({value:e})=>{const s=r.Loading.service({fullscreen:!0});this.SeeksHttp.postJson("/account/useExchangeCoupon",{exCode:e}).then(async t=>{s.close(),console.log(t.data),t&&t.data&&t.data.code===200&&(this.$message({type:"success",message:t.data.data}),await this.$store.dispatch("user/getInfo"))})})},async loadMyDocs(){const e=await this.SeeksHttp.postJson("/my-graph/docs",{});console.log("vipCards:",e.data),this.myDocs=e.data.data},async deleteDoc(e){const s=await this.SeeksHttp.postJson("/my-graph/delete-doc",{docId:e.docId});s.data.data?(this.$message({type:"success",message:"删除成功！"}),await this.loadMyDocs()):this.$message({type:"error",message:"删除失败："+s.data.message})}}},a={};var g=c(h,u,m,!1,v,"68710366",null,null);function v(e){for(let s in a)this[s]=a[s]}const k=function(){return g.exports}();export{k as default};
