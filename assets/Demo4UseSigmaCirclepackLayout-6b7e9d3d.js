
/**
*  亲爱的朋友：
*      很高兴你能看到这段文字，这说明你是非常热爱技术、热爱学习的。
*      组件中所有示例都可以通过文档 + typescript描述找到相关配置及用法
*      示例可以为你提供额外的灵感、方便你完成开发目标、节省你工作时间
*      以下代码也许花些时间很容易破解，但相比下面这个方案，通过破解代码来学习知识显然是不划算的：
*      https://relation-graph.com/#/vip-services
*      因为你的时间非常宝贵，开通会员直接查看代码学习、直接沟通解决问题，是最最高效的学习和工作方法，期待你的加入。
**/
              import{d as Q,i as V,G as X}from"./is-graph-82d2a25b.js";import{g as Y,n as Z}from"./index-a776829b.js";function D(t){return function(o,e){return o+Math.floor(t()*(e-o+1))}}var W=D(Math.random);W.createRandom=D;var B=W,tt=B.createRandom;function z(t){var o=tt(t);return function(e){for(var r=e.length,n=r-1,i=-1;++i<r;){var l=o(i,n),N=e[l];e[l]=e[i],e[i]=N}}}var O=z(Math.random);O.createShuffleInPlace=z;var et=O,rt=Q,ot=V,nt=et,it={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function f(t,o,e,r,n){this.wrappedCircle=n||null,this.children={},this.countChildren=0,this.id=t||null,this.next=null,this.previous=null,this.x=o||null,this.y=e||null,n?this.r=1010101:this.r=r||999}f.prototype.hasChildren=function(){return this.countChildren>0};f.prototype.addChild=function(t,o){this.children[t]=o,++this.countChildren};f.prototype.getChild=function(t){if(!this.children.hasOwnProperty(t)){var o=new f;this.children[t]=o,++this.countChildren}return this.children[t]};f.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var t=this;for(var o in t.children){var e=t.children[o];e.x+=t.x,e.y+=t.y,e.applyPositionToChildren()}}};function F(t,o,e){for(var r in o.children){var n=o.children[r];n.hasChildren()?F(t,n,e):e[n.id]={x:n.x,y:n.y}}}function L(t,o){var e=t.r-o.r,r=o.x-t.x,n=o.y-t.y;return e<0||e*e<r*r+n*n}function H(t,o){var e=t.r-o.r+1e-6,r=o.x-t.x,n=o.y-t.y;return e>0&&e*e>r*r+n*n}function I(t,o){for(var e=0;e<o.length;++e)if(!H(t,o[e]))return!1;return!0}function at(t){return new f(null,t.x,t.y,t.r)}function C(t,o){var e=t.x,r=t.y,n=t.r,i=o.x,l=o.y,N=o.r,a=i-e,d=l-r,s=N-n,x=Math.sqrt(a*a+d*d);return new f(null,(e+i+a/x*s)/2,(r+l+d/x*s)/2,(x+n+N)/2)}function U(t,o,e){var r=t.x,n=t.y,i=t.r,l=o.x,N=o.y,a=o.r,d=e.x,s=e.y,x=e.r,u=r-l,c=r-d,v=n-N,h=n-s,w=a-i,p=x-i,_=r*r+n*n-i*i,k=_-l*l-N*N+a*a,y=_-d*d-s*s+x*x,m=c*v-u*h,g=(v*y-h*k)/(m*2)-r,E=(h*w-v*p)/m,b=(c*k-u*y)/(m*2)-n,S=(u*p-c*w)/m,M=E*E+S*S-1,P=2*(i+g*E+b*S),R=g*g+b*b-i*i,A=-(M?(P+Math.sqrt(P*P-4*M*R))/(2*M):R/P);return new f(null,r+g+E*A,n+b+S*A,A)}function lt(t){switch(t.length){case 1:return at(t[0]);case 2:return C(t[0],t[1]);case 3:return U(t[0],t[1],t[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+t.length)}}function dt(t,o){var e,r;if(I(o,t))return[o];for(e=0;e<t.length;++e)if(L(o,t[e])&&I(C(t[e],o),t))return[t[e],o];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(L(C(t[e],t[r]),o)&&L(C(t[e],o),t[r])&&L(C(t[r],o),t[e])&&I(U(t[e],t[r],o),t))return[t[e],t[r],o];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function j(t){var o=t.wrappedCircle,e=t.next.wrappedCircle,r=o.r+e.r,n=(o.x*e.r+e.x*o.r)/r,i=(o.y*e.r+e.y*o.r)/r;return n*n+i*i}function Nt(t,o){var e=0,r=t.slice(),n=t.length,i=[],l,N;for(o(r);e<n;)l=r[e],N&&H(N,l)?++e:(i=dt(i,l),N=lt(i),e=0);return N}function $(t,o,e){var r=t.x-o.x,n,i,l=t.y-o.y,N,a,d=r*r+l*l;d?(i=o.r+e.r,i*=i,a=t.r+e.r,a*=a,i>a?(n=(d+a-i)/(2*d),N=Math.sqrt(Math.max(0,a/d-n*n)),e.x=t.x-n*r-N*l,e.y=t.y-n*l+N*r):(n=(d+i-a)/(2*d),N=Math.sqrt(Math.max(0,i/d-n*n)),e.x=o.x+n*r-N*l,e.y=o.y+n*l+N*r)):(e.x=o.x+e.r,e.y=o.y)}function G(t,o){var e=t.r+o.r-1e-6,r=o.x-t.x,n=o.y-t.y;return e>0&&e*e>r*r+n*n}function st(t,o){var e=t.length;if(e===0)return 0;var r,n,i,l,N,a,d,s,x,u;if(r=t[0],r.x=0,r.y=0,e<=1)return r.r;if(n=t[1],r.x=-n.r,n.x=r.r,n.y=0,e<=2)return r.r+n.r;i=t[2],$(n,r,i),r=new f(null,null,null,null,r),n=new f(null,null,null,null,n),i=new f(null,null,null,null,i),r.next=i.previous=n,n.next=r.previous=i,i.next=n.previous=r;t:for(a=3;a<e;++a){i=t[a],$(r.wrappedCircle,n.wrappedCircle,i),i=new f(null,null,null,null,i),d=n.next,s=r.previous,x=n.wrappedCircle.r,u=r.wrappedCircle.r;do if(x<=u){if(G(d.wrappedCircle,i.wrappedCircle)){n=d,r.next=n,n.previous=r,--a;continue t}x+=d.wrappedCircle.r,d=d.next}else{if(G(s.wrappedCircle,i.wrappedCircle)){r=s,r.next=n,n.previous=r,--a;continue t}u+=s.wrappedCircle.r,s=s.previous}while(d!==s.next);for(i.previous=r,i.next=n,r.next=n.previous=n=i,l=j(r);(i=i.next)!==n;)(N=j(i))<l&&(r=i,l=N);n=r.next}r=[n.wrappedCircle],i=n;for(var c=1e4;(i=i.next)!==n&&--c!==0;)r.push(i.wrappedCircle);for(i=Nt(r,o),a=0;a<e;++a)r=t[a],r.x-=i.x,r.y-=i.y;return i.r}function J(t,o){var e=0;if(t.hasChildren()){for(var r in t.children){var n=t.children[r];n.hasChildren()&&(n.r=J(n,o))}e=st(Object.values(t.children),o)}return e}function ft(t,o){J(t,o);for(var e in t.children){var r=t.children[e];r.applyPositionToChildren()}}function q(t,o,e){if(!ot(o))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");e=rt(e,it);var r={},n={},i=o.nodes(),l=e.center,N=e.hierarchyAttributes,a=nt.createShuffleInPlace(e.rng),d=e.scale,s=new f;o.forEachNode(function(w,p){var _=p.size?p.size:1,k=new f(w,null,null,_),y=s;N.forEach(function(m){var g=p[m];y=y.getChild(g)}),y.addChild(w,k)}),ft(s,a),F(o,s,r);var x=i.length,u,c,v;for(v=0;v<x;v++){var h=i[v];u=l+d*r[h].x,c=l+d*r[h].y,n[h]={x:u,y:c},t&&(o.setNodeAttribute(h,e.attributes.x,u),o.setNodeAttribute(h,e.attributes.y,c))}return n}var K=q.bind(null,!1);K.assign=q.bind(null,!0);var xt=K;const ut=Y(xt);var ct=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[t._m(0),e("div",{staticStyle:{height:"calc(100vh - 100px)"}},[e("RelationGraph",{ref:"graphRef",attrs:{options:t.graphOptions,"on-node-click":t.onNodeClick,"on-line-click":t.onLineClick}})],1)])},ht=[function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticStyle:{height:"50px","padding-top":"6px","padding-left":"20px","padding-right":"30px","border-bottom":"#efefef solid 1px","font-size":"12px"}},[t._v(" 此布局使用到了第三方布局算法：Sigma，同时relation-graph的支持插槽等强大功能您依然可以使用，完美融合. Sigma circlepack布局支持对无根节点、无关系的节点进行布局。 "),e("br"),t._v("其他任何布局算法，都可以与relation-graph进行融合。 ")])}];const vt={name:"Demo",components:{},data(){return{currentCase:"横向树状图谱",isShowCodePanel:!1,graphOptions:{debug:!1,lineUseTextPath:!0,layout:{layoutName:"fixed"},placeSingleNode:!1,defaultNodeShape:0,defaultLineShape:1,defaultJunctionPoint:"border",defaultNodeBorderWidth:0,defaultNodeWidth:30,defaultNodeHeight:30,defaultLineColor:"rgba(0, 186, 189, 1)",defaultNodeColor:"rgba(0, 206, 209, 1)"}}},mounted(){this.useGraphologyLayout()},methods:{async useGraphologyLayout(){const t={rootId:"root",nodes:[{id:"root",text:"节点"},{id:"N2",text:"新节点N2"},{id:"N3",text:"新节点N3"},{id:"N4",text:"新节点N4"},{id:"N5",text:"新节点N5"},{id:"N6",text:"新节点N6"},{id:"N7",text:"新节点N7"},{id:"N8",text:"新节点N8"},{id:"N9",text:"新节点N9"},{id:"N10",text:"新节点N10"},{id:"N11",text:"新节点N11"},{id:"N12",text:"新节点N12"},{id:"N13",text:"新节点N13"},{id:"N14",text:"新节点N14"},{id:"N15",text:"新节点N15"},{id:"N16",text:"新节点N16"},{id:"N17",text:"新节点N17"},{id:"N18",text:"新节点N18"},{id:"N19",text:"新节点N19"},{id:"N20",text:"新节点N20"},{id:"N21",text:"新节点N21"},{id:"N22",text:"新节点N22"},{id:"N23",text:"新节点N23"},{id:"N24",text:"新节点N24"},{id:"N25",text:"新节点N25"},{id:"N26",text:"新节点N26"},{id:"N27",text:"New-N27"},{id:"N28",text:"New-N28"},{id:"N29",text:"New-N29"},{id:"N30",text:"New-N30"},{id:"N31",text:"New-N31"},{id:"N32",text:"New-N32"},{id:"N33",text:"New-N33"},{id:"N34",text:"New-N34"},{id:"N35",text:"New-N35"},{id:"N36",text:"New-N36"},{id:"N37",text:"New-N37"},{id:"N38",text:"New-N38"},{id:"N39",text:"New-N39"}],lines:[{from:"N3",to:"N2",text:"新连线1"},{from:"N2",to:"root",text:"新连线1"},{from:"root",to:"N4",text:"新连线2"},{from:"N4",to:"N5",text:"新连线3"},{from:"N6",to:"N7",text:"新连线2"},{from:"N7",to:"root",text:"新连线3"},{from:"N8",to:"N9",text:"新连线4"},{from:"N9",to:"root",text:"新连线5"},{from:"N10",to:"N11",text:"新连线6"},{from:"N11",to:"root",text:"新连线7"},{from:"N13",to:"N12",text:"新连线8"},{from:"N12",to:"root",text:"新连线9"},{from:"N18",to:"N17",text:"新连线10"},{from:"N17",to:"N14",text:"新连线11"},{from:"N15",to:"N14",text:"新连线12"},{from:"N16",to:"N15",text:"新连线13"},{from:"N12",to:"N14",text:"新连线14"},{from:"N20",to:"N19",text:"新连线15"},{from:"N21",to:"N19",text:"新连线16"},{from:"N19",to:"N15",text:"新连线17"},{from:"N26",to:"N22",text:"新连线18"},{from:"N24",to:"N25",text:"新连线19"},{from:"N24",to:"N22",text:"新连线20"},{from:"N22",to:"N23",text:"新连线21"},{from:"N23",to:"N14",text:"新连线22"},{from:"root",to:"N30",text:"新连线1"},{from:"root",to:"N27",text:"新连线2"},{from:"N30",to:"N33",text:"新连线3"},{from:"N30",to:"N29",text:"新连线4"},{from:"N27",to:"N28",text:"新连线5"},{from:"N27",to:"N31",text:"新连线6"},{from:"N27",to:"N32",text:"新连线7"},{from:"N4",to:"N34",text:"新连线8"},{from:"N28",to:"N35",text:"新连线9"},{from:"N28",to:"N36",text:"新连线12"},{from:"N28",to:"N37",text:"新连线13"},{from:"N36",to:"N39",text:"新连线14"},{from:"N36",to:"N38",text:"新连线15"}]};t.nodes.forEach(r=>{r.text="N"});for(let r=0;r<t.lines.length;r++)Math.random()<.7&&(t.lines.splice(r,1),r--);const o=new X,e=this.$refs.graphRef.getInstance();await e.setJsonData(t),e.getNodes().forEach(r=>{o.addNode(r.id,{text:r.text,width:r.el.offsetWidth,height:r.el.offsetHeight})}),e.getLinks().forEach(r=>{r.relations.forEach(n=>{o.addEdge(r.fromNode.id,r.toNode.id,{id:n.id,weight:1})})}),ut.assign(o),o.nodes().forEach(r=>{const n=o.getNodeAttributes(r);console.log(r);const i=e.getNodeById(r);i.x=n.x*100,i.y=n.y*100}),await e.moveToCenter(),await e.zoomToFit()},onNodeClick(t,o){console.log("onNodeClick:",t)},onLineClick(t,o,e){console.log("onLineClick:",t)}}},T={};var pt=Z(vt,ct,ht,!1,yt,null,null,null);function yt(t){for(let o in T)this[o]=T[o]}const wt=function(){return pt.exports}();export{wt as default};
